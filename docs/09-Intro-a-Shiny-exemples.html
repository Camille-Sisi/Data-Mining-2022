<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 9 La création d’une application Shiny “pas à pas” avec l’une de nos bases de données | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 9 La création d’une application Shiny “pas à pas” avec l’une de nos bases de données | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 9 La création d’une application Shiny “pas à pas” avec l’une de nos bases de données | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />


<meta name="date" content="2022-05-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="08-Intro-a-Shiny-theorique.html"/>
<link rel="next" href="10-Ggplot-theorique.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Jeu-de-donnees.html"><a href="01-Jeu-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération du jeu de données sur une API</a></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#séparer-les-variables-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Séparer les variables, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Enregistrement-tables-donnees.html"><a href="04-Enregistrement-tables-donnees.html"><i class="fa fa-check"></i><b>4</b> Enregistrement des tables</a></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-cohorte-des-bacheliers-2014-inscrits-en-première-année-de-licence-en-2014-2015"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-Fonctions.html"><a href="06-Fonctions.html"><i class="fa fa-check"></i><b>6</b> Systématiser nos procédures : construire une fonction</a></li>
<li class="chapter" data-level="7" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html"><i class="fa fa-check"></i><b>7</b> (reprise de l’)Analyse descriptive</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html#caractéristiques-de-la-cohorte-des-bacheliers-2014-inscrits-en-première-année-de-licence-en-2014-2015-1"><i class="fa fa-check"></i><b>7.1</b> Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015</a></li>
<li class="chapter" data-level="7.2" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html#profils-des-étudiants-selon-leur-situation-en-fin-de-l1"><i class="fa fa-check"></i><b>7.2</b> Profils des étudiants selon leur situation en fin de L1</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Introduction à ShinyApp</b></span></li>
<li class="chapter" data-level="8" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html"><i class="fa fa-check"></i><b>8</b> Les applications interactives avec Shiny App</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-structure-générale-dune-application-shiny"><i class="fa fa-check"></i><b>8.1</b> La structure générale d’une application Shiny</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-partie-ui"><i class="fa fa-check"></i><b>8.1.1</b> La partie “UI”</a></li>
<li class="chapter" data-level="8.1.2" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-partie-server"><i class="fa fa-check"></i><b>8.1.2</b> La partie “Server”</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-réactivité"><i class="fa fa-check"></i><b>8.2</b> La réactivité</a></li>
<li class="chapter" data-level="8.3" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#un-exemple-avec-le-code-du-script-par-défaut"><i class="fa fa-check"></i><b>8.3</b> Un exemple avec le code du script par défaut</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html"><i class="fa fa-check"></i><b>9</b> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#application-vide"><i class="fa fa-check"></i><b>9.1</b> Application vide</a></li>
<li class="chapter" data-level="9.2" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget"><i class="fa fa-check"></i><b>9.2</b> Ajout d’un titre et d’un widget</a></li>
<li class="chapter" data-level="9.3" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#ajout-dun-graphique"><i class="fa fa-check"></i><b>9.3</b> Ajout d’un graphique</a></li>
<li class="chapter" data-level="9.4" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable"><i class="fa fa-check"></i><b>9.4</b> Modification du graphique : filtrer selon une variable</a></li>
<li class="chapter" data-level="9.5" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux"><i class="fa fa-check"></i><b>9.5</b> Modification du graphique : selon une variable au choix parmi deux</a></li>
</ul></li>
<li class="part"><span><b>Séances 4 et 5 : Data Visualization</b></span></li>
<li class="chapter" data-level="10" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html"><i class="fa fa-check"></i><b>10</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>10.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>10.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>10.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>10.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>10.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="10.1.5" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>10.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="10.1.6" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>10.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="10.1.7" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>10.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="10.1.8" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>10.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="10.1.9" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>10.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>10.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html"><i class="fa fa-check"></i><b>11</b> Le package Ggplot en pratiques</a>
<ul>
<li class="chapter" data-level="11.1" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>11.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="11.2" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>11.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#distribution-du-montant-total-des-aides-financières-par-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.1</b> Distribution du montant total des aides financières, par secteur d’activité</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-des-aides-financières-par-région"><i class="fa fa-check"></i><b>11.2.2</b> Comparaison des montants moyen et médian des aides financières, par région</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#lien-entre-le-montant-moyen-des-aides-versées-et-le-nombre-moyen-dentreprises-bénéficiaires-par-secteur-dactivité-puis-par-région"><i class="fa fa-check"></i><b>11.2.3</b> Lien entre le montant moyen des aides versées et le nombre moyen d’entreprises bénéficiaires, par secteur d’activité puis par région</a></li>
<li class="chapter" data-level="11.2.4" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#montant-moyen-des-aides-versées-par-entreprise-dans-chaque-région-ou-chaque-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.4</b> Montant moyen des aides versées par entreprise dans chaque région ou chaque secteur d’activité</a></li>
<li class="chapter" data-level="11.2.5" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#top-5-des-aides-financières-versées-selon-la-région-ou-le-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.5</b> Top 5 des aides financières versées selon la région ou le secteur d’activité</a></li>
<li class="chapter" data-level="11.2.6" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>11.2.6</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html"><i class="fa fa-check"></i><b>12</b> Application sur Shiny</a>
<ul>
<li class="chapter" data-level="12.1" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#application-avec-un-tableau-et-un-graphique"><i class="fa fa-check"></i><b>12.1</b> Application avec un tableau et un graphique</a></li>
<li class="chapter" data-level="12.2" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-appliquée-à-la-table-de-données"><i class="fa fa-check"></i><b>12.2</b> Introduction d’une réactivité appliquée à la table de données</a></li>
<li class="chapter" data-level="12.3" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-sans-changer-les-outputs-contexte-réactif"><i class="fa fa-check"></i><b>12.3</b> Introduction d’une réactivité sur les inputs sans changer les outputs (contexte réactif)</a></li>
<li class="chapter" data-level="12.4" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-et-les-outputs"><i class="fa fa-check"></i><b>12.4</b> Introduction d’une réactivité sur les inputs ET les outputs</a></li>
</ul></li>
<li class="part"><span><b>Séances 6 et 7 : Clustering</b></span></li>
<li class="chapter" data-level="13" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html"><i class="fa fa-check"></i><b>13</b> Nouvelle base de données individuelles à prendre en main : le RP 2018</a>
<ul>
<li class="chapter" data-level="13.1" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>13.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="13.2" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#prise-en-main-rapide"><i class="fa fa-check"></i><b>13.2</b> Prise en main rapide</a></li>
<li class="chapter" data-level="13.3" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#tableaux-de-contingence-par-iris-découpage-territorial-infracommunal"><i class="fa fa-check"></i><b>13.3</b> Tableaux de contingence par IRIS (découpage territorial infracommunal)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html"><i class="fa fa-check"></i><b>14</b> Clustering : aspects théoriques</a>
<ul>
<li class="chapter" data-level="14.1" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html#la-classification-ascendante-hiérarchique-cah"><i class="fa fa-check"></i><b>14.1</b> La classification ascendante hiérarchique (CAH)</a></li>
<li class="chapter" data-level="14.2" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html#la-méthode-des-centres-mobiles-et-sa-variante-les-k-means"><i class="fa fa-check"></i><b>14.2</b> La méthode des centres mobiles et sa variante, <em>les K-means</em></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c09-Intro-a-Shiny-exemples" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Section 9</span> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données<a href="09-Intro-a-Shiny-exemples.html#c09-Intro-a-Shiny-exemples" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">
<p>On va utiliser la base des aides aux entreprises durant la crise du Covid-19 ; je l’avais enregistré précédemment dans le dossier “Data” du projet correspondant aux deux premières séances de cours et sous le nom “dt_aidesCovid.Rdata”. Si vous êtes dans le même projet, il faut donc l’appeler grâce à la fonction <code>readRDS()</code>.</p>
<div id="application-vide" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Application vide<a href="09-Intro-a-Shiny-exemples.html#application-vide" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Faisons tourner une application vide et ajoutons au fur et à mesure les éléments qui construirons une vraie application :</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="09-Intro-a-Shiny-exemples.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(shiny)</span></span>
<span id="cb91-2"><a href="09-Intro-a-Shiny-exemples.html#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="09-Intro-a-Shiny-exemples.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb91-4"><a href="09-Intro-a-Shiny-exemples.html#cb91-4" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb91-5"><a href="09-Intro-a-Shiny-exemples.html#cb91-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-6"><a href="09-Intro-a-Shiny-exemples.html#cb91-6" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb91-7"><a href="09-Intro-a-Shiny-exemples.html#cb91-7" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb91-8"><a href="09-Intro-a-Shiny-exemples.html#cb91-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-9"><a href="09-Intro-a-Shiny-exemples.html#cb91-9" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, </span>
<span id="cb91-10"><a href="09-Intro-a-Shiny-exemples.html#cb91-10" aria-hidden="true" tabindex="-1"></a>                   output) {</span>
<span id="cb91-11"><a href="09-Intro-a-Shiny-exemples.html#cb91-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb91-12"><a href="09-Intro-a-Shiny-exemples.html#cb91-12" aria-hidden="true" tabindex="-1"></a>                   }</span>
<span id="cb91-13"><a href="09-Intro-a-Shiny-exemples.html#cb91-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-14"><a href="09-Intro-a-Shiny-exemples.html#cb91-14" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
<div id="ajout-dun-titre-et-dun-widget" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Ajout d’un titre et d’un widget<a href="09-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ajoutons un titre et un widget, par exemple une barre “slider” :</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="09-Intro-a-Shiny-exemples.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(shiny)</span></span>
<span id="cb92-2"><a href="09-Intro-a-Shiny-exemples.html#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="09-Intro-a-Shiny-exemples.html#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb92-4"><a href="09-Intro-a-Shiny-exemples.html#cb92-4" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb92-5"><a href="09-Intro-a-Shiny-exemples.html#cb92-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-6"><a href="09-Intro-a-Shiny-exemples.html#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb92-7"><a href="09-Intro-a-Shiny-exemples.html#cb92-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb92-8"><a href="09-Intro-a-Shiny-exemples.html#cb92-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb92-9"><a href="09-Intro-a-Shiny-exemples.html#cb92-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb92-10"><a href="09-Intro-a-Shiny-exemples.html#cb92-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb92-11"><a href="09-Intro-a-Shiny-exemples.html#cb92-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb92-12"><a href="09-Intro-a-Shiny-exemples.html#cb92-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb92-13"><a href="09-Intro-a-Shiny-exemples.html#cb92-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb92-14"><a href="09-Intro-a-Shiny-exemples.html#cb92-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;Classes&quot;</span>,</span>
<span id="cb92-15"><a href="09-Intro-a-Shiny-exemples.html#cb92-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes : &quot;</span>,</span>
<span id="cb92-16"><a href="09-Intro-a-Shiny-exemples.html#cb92-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb92-17"><a href="09-Intro-a-Shiny-exemples.html#cb92-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb92-18"><a href="09-Intro-a-Shiny-exemples.html#cb92-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>)</span>
<span id="cb92-19"><a href="09-Intro-a-Shiny-exemples.html#cb92-19" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb92-20"><a href="09-Intro-a-Shiny-exemples.html#cb92-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-21"><a href="09-Intro-a-Shiny-exemples.html#cb92-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mainPanel</span>(</span>
<span id="cb92-22"><a href="09-Intro-a-Shiny-exemples.html#cb92-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb92-23"><a href="09-Intro-a-Shiny-exemples.html#cb92-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-24"><a href="09-Intro-a-Shiny-exemples.html#cb92-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb92-25"><a href="09-Intro-a-Shiny-exemples.html#cb92-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb92-26"><a href="09-Intro-a-Shiny-exemples.html#cb92-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb92-27"><a href="09-Intro-a-Shiny-exemples.html#cb92-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-28"><a href="09-Intro-a-Shiny-exemples.html#cb92-28" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb92-29"><a href="09-Intro-a-Shiny-exemples.html#cb92-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb92-30"><a href="09-Intro-a-Shiny-exemples.html#cb92-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-31"><a href="09-Intro-a-Shiny-exemples.html#cb92-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-32"><a href="09-Intro-a-Shiny-exemples.html#cb92-32" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
<div id="ajout-dun-graphique" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Ajout d’un graphique<a href="09-Intro-a-Shiny-exemples.html#ajout-dun-graphique" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ajoutons un graphique ; il faut pour cela charger la base de données sur laquelle nous allons travailler :</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="09-Intro-a-Shiny-exemples.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(shiny)</span></span>
<span id="cb93-2"><a href="09-Intro-a-Shiny-exemples.html#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="09-Intro-a-Shiny-exemples.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb93-4"><a href="09-Intro-a-Shiny-exemples.html#cb93-4" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb93-5"><a href="09-Intro-a-Shiny-exemples.html#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="09-Intro-a-Shiny-exemples.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb93-7"><a href="09-Intro-a-Shiny-exemples.html#cb93-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb93-8"><a href="09-Intro-a-Shiny-exemples.html#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb93-9"><a href="09-Intro-a-Shiny-exemples.html#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb93-10"><a href="09-Intro-a-Shiny-exemples.html#cb93-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb93-11"><a href="09-Intro-a-Shiny-exemples.html#cb93-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb93-12"><a href="09-Intro-a-Shiny-exemples.html#cb93-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb93-13"><a href="09-Intro-a-Shiny-exemples.html#cb93-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb93-14"><a href="09-Intro-a-Shiny-exemples.html#cb93-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb93-15"><a href="09-Intro-a-Shiny-exemples.html#cb93-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb93-16"><a href="09-Intro-a-Shiny-exemples.html#cb93-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb93-17"><a href="09-Intro-a-Shiny-exemples.html#cb93-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb93-18"><a href="09-Intro-a-Shiny-exemples.html#cb93-18" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> <span class="dv">50</span>)</span>
<span id="cb93-19"><a href="09-Intro-a-Shiny-exemples.html#cb93-19" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb93-20"><a href="09-Intro-a-Shiny-exemples.html#cb93-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-21"><a href="09-Intro-a-Shiny-exemples.html#cb93-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb93-22"><a href="09-Intro-a-Shiny-exemples.html#cb93-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb93-23"><a href="09-Intro-a-Shiny-exemples.html#cb93-23" aria-hidden="true" tabindex="-1"></a>           <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb93-24"><a href="09-Intro-a-Shiny-exemples.html#cb93-24" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb93-25"><a href="09-Intro-a-Shiny-exemples.html#cb93-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb93-26"><a href="09-Intro-a-Shiny-exemples.html#cb93-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb93-27"><a href="09-Intro-a-Shiny-exemples.html#cb93-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-28"><a href="09-Intro-a-Shiny-exemples.html#cb93-28" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, </span>
<span id="cb93-29"><a href="09-Intro-a-Shiny-exemples.html#cb93-29" aria-hidden="true" tabindex="-1"></a>                   output) {</span>
<span id="cb93-30"><a href="09-Intro-a-Shiny-exemples.html#cb93-30" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb93-31"><a href="09-Intro-a-Shiny-exemples.html#cb93-31" aria-hidden="true" tabindex="-1"></a>  dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb93-32"><a href="09-Intro-a-Shiny-exemples.html#cb93-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>total_meuros) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">150</span>)</span>
<span id="cb93-33"><a href="09-Intro-a-Shiny-exemples.html#cb93-33" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb93-34"><a href="09-Intro-a-Shiny-exemples.html#cb93-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-35"><a href="09-Intro-a-Shiny-exemples.html#cb93-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb93-36"><a href="09-Intro-a-Shiny-exemples.html#cb93-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-37"><a href="09-Intro-a-Shiny-exemples.html#cb93-37" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>On a bien maintenant le graphique qui s’affiche mais lorsqu’on change le nombre de classes dans la barre slider, rien ne se passe… C’est normal, nous n’avons pas encore introduit de réactivité dans l’application.</p>
<p>Pour cela, il va falloir modifier le code dans la fonction <strong><code>server</code></strong> et ainsi mettre en lien des informations indiquées dans la fonction <strong><code>UI</code></strong> avec les arguments utilisés dans le graphique développé dans la fonction <strong><code>server</code></strong>. Pour l’instant, on veut pouvoir modifier le nombre de classes, l’argument pour cela dans la fonction <code>geom_histogram()</code> dans le <code>ggplot()</code> est <code>bins=</code> ; on a indiqué ‘150’ jusqu’ici ; maintenant il faut lui indiquer le nombre que l’utilisateur va lui-même indiquer dans la barre slider ; cela se fait avec l’argument <code>input$...</code>, les “…” devant être remplacés par le nom que l’on a donné à l’<code>inputId</code> dans le <code>sliderInput()</code>, donc ici “classes”.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="09-Intro-a-Shiny-exemples.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb94-2"><a href="09-Intro-a-Shiny-exemples.html#cb94-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb94-3"><a href="09-Intro-a-Shiny-exemples.html#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="09-Intro-a-Shiny-exemples.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb94-5"><a href="09-Intro-a-Shiny-exemples.html#cb94-5" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb94-6"><a href="09-Intro-a-Shiny-exemples.html#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb94-7"><a href="09-Intro-a-Shiny-exemples.html#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb94-8"><a href="09-Intro-a-Shiny-exemples.html#cb94-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-9"><a href="09-Intro-a-Shiny-exemples.html#cb94-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb94-10"><a href="09-Intro-a-Shiny-exemples.html#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb94-11"><a href="09-Intro-a-Shiny-exemples.html#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb94-12"><a href="09-Intro-a-Shiny-exemples.html#cb94-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb94-13"><a href="09-Intro-a-Shiny-exemples.html#cb94-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb94-14"><a href="09-Intro-a-Shiny-exemples.html#cb94-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb94-15"><a href="09-Intro-a-Shiny-exemples.html#cb94-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb94-16"><a href="09-Intro-a-Shiny-exemples.html#cb94-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>)</span>
<span id="cb94-17"><a href="09-Intro-a-Shiny-exemples.html#cb94-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb94-18"><a href="09-Intro-a-Shiny-exemples.html#cb94-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb94-19"><a href="09-Intro-a-Shiny-exemples.html#cb94-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb94-20"><a href="09-Intro-a-Shiny-exemples.html#cb94-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb94-21"><a href="09-Intro-a-Shiny-exemples.html#cb94-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb94-22"><a href="09-Intro-a-Shiny-exemples.html#cb94-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb94-23"><a href="09-Intro-a-Shiny-exemples.html#cb94-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb94-24"><a href="09-Intro-a-Shiny-exemples.html#cb94-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb94-25"><a href="09-Intro-a-Shiny-exemples.html#cb94-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-26"><a href="09-Intro-a-Shiny-exemples.html#cb94-26" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb94-27"><a href="09-Intro-a-Shiny-exemples.html#cb94-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-28"><a href="09-Intro-a-Shiny-exemples.html#cb94-28" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb94-29"><a href="09-Intro-a-Shiny-exemples.html#cb94-29" aria-hidden="true" tabindex="-1"></a>      dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb94-30"><a href="09-Intro-a-Shiny-exemples.html#cb94-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>total_meuros) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span>input<span class="sc">$</span>classes)</span>
<span id="cb94-31"><a href="09-Intro-a-Shiny-exemples.html#cb94-31" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb94-32"><a href="09-Intro-a-Shiny-exemples.html#cb94-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb94-33"><a href="09-Intro-a-Shiny-exemples.html#cb94-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-34"><a href="09-Intro-a-Shiny-exemples.html#cb94-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-35"><a href="09-Intro-a-Shiny-exemples.html#cb94-35" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Ça y est, maintenant lorsqu’on modifie le curseur dans la barre slider, le graphique change !</p>
</div>
<div id="modification-du-graphique-filtrer-selon-une-variable" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Modification du graphique : filtrer selon une variable<a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Essayons ensuite d’ajouter un filtre sur la région pour n’avoir que la distribution du montant total des aides financières distribuées aux entreprises pour une région donnée. De même, on peut procéder par étapes : présentons d’abord le graphique pour la seule région Île-de-France :</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="09-Intro-a-Shiny-exemples.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb95-2"><a href="09-Intro-a-Shiny-exemples.html#cb95-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb95-3"><a href="09-Intro-a-Shiny-exemples.html#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="09-Intro-a-Shiny-exemples.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb95-5"><a href="09-Intro-a-Shiny-exemples.html#cb95-5" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb95-6"><a href="09-Intro-a-Shiny-exemples.html#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb95-7"><a href="09-Intro-a-Shiny-exemples.html#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb95-8"><a href="09-Intro-a-Shiny-exemples.html#cb95-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-9"><a href="09-Intro-a-Shiny-exemples.html#cb95-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb95-10"><a href="09-Intro-a-Shiny-exemples.html#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb95-11"><a href="09-Intro-a-Shiny-exemples.html#cb95-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb95-12"><a href="09-Intro-a-Shiny-exemples.html#cb95-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb95-13"><a href="09-Intro-a-Shiny-exemples.html#cb95-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb95-14"><a href="09-Intro-a-Shiny-exemples.html#cb95-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb95-15"><a href="09-Intro-a-Shiny-exemples.html#cb95-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb95-16"><a href="09-Intro-a-Shiny-exemples.html#cb95-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>)</span>
<span id="cb95-17"><a href="09-Intro-a-Shiny-exemples.html#cb95-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb95-18"><a href="09-Intro-a-Shiny-exemples.html#cb95-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb95-19"><a href="09-Intro-a-Shiny-exemples.html#cb95-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb95-20"><a href="09-Intro-a-Shiny-exemples.html#cb95-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb95-21"><a href="09-Intro-a-Shiny-exemples.html#cb95-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb95-22"><a href="09-Intro-a-Shiny-exemples.html#cb95-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb95-23"><a href="09-Intro-a-Shiny-exemples.html#cb95-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb95-24"><a href="09-Intro-a-Shiny-exemples.html#cb95-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-25"><a href="09-Intro-a-Shiny-exemples.html#cb95-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-26"><a href="09-Intro-a-Shiny-exemples.html#cb95-26" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb95-27"><a href="09-Intro-a-Shiny-exemples.html#cb95-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-28"><a href="09-Intro-a-Shiny-exemples.html#cb95-28" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb95-29"><a href="09-Intro-a-Shiny-exemples.html#cb95-29" aria-hidden="true" tabindex="-1"></a>      dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb95-30"><a href="09-Intro-a-Shiny-exemples.html#cb95-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(reg_name <span class="sc">==</span> <span class="st">&quot;Île-de-France&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-31"><a href="09-Intro-a-Shiny-exemples.html#cb95-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>total_meuros) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span>input<span class="sc">$</span>classes)</span>
<span id="cb95-32"><a href="09-Intro-a-Shiny-exemples.html#cb95-32" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb95-33"><a href="09-Intro-a-Shiny-exemples.html#cb95-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb95-34"><a href="09-Intro-a-Shiny-exemples.html#cb95-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb95-35"><a href="09-Intro-a-Shiny-exemples.html#cb95-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-36"><a href="09-Intro-a-Shiny-exemples.html#cb95-36" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Il suffit en effet d’ajouter un <code>filter(reg_name == "Île-de-France")</code> dans notre code.</p>
<p>Ensuite, donnons la possibilité à l’utilisateur de choisir la région qu’il veut : il faut pour cela ajouter un widget dans la fonction <strong><code>UI</code></strong> ; comme on ne veut laisser qu’un choix de région à l’utilisateur, on peut utiliser un “Radio buttons” ; on regarde alors quels sont les arguments de la fonction <code>radioButtons()</code>, on voit qu’il faut indiquer les choix possibles donc ici la liste des régions dans <code>choices =</code> et indiquer une valeur par défaut dans <code>selected =</code> ; pour cela, on peut indiquer la variable correspondante <code>choices = dt_aidesCovid$reg_name</code>, mais attention si on laisse comme ceci, on va avoir une répétition de noms des régions comme lorsqu’on ouvre la table, ce qu’on veut c’est uniquement les niveaux… deux possibilités alors : soit créer avant l’appel de la fonction <strong><code>UI</code></strong> une variable avec simplement les niveaux de cette variable ; soit passer par la fonction <code>unique()</code> dans l’argument donné.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="09-Intro-a-Shiny-exemples.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb96-2"><a href="09-Intro-a-Shiny-exemples.html#cb96-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb96-3"><a href="09-Intro-a-Shiny-exemples.html#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="09-Intro-a-Shiny-exemples.html#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Quelques modifications du fichier initial de données</span></span>
<span id="cb96-5"><a href="09-Intro-a-Shiny-exemples.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dt_aidesCovid &lt;- dt_aidesCovid %&gt;% mutate(reg_name=as.factor(reg_name))</span></span>
<span id="cb96-6"><a href="09-Intro-a-Shiny-exemples.html#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co"># nom_regions &lt;- levels(dt_aidesCovid$reg_name)</span></span>
<span id="cb96-7"><a href="09-Intro-a-Shiny-exemples.html#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="09-Intro-a-Shiny-exemples.html#cb96-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-9"><a href="09-Intro-a-Shiny-exemples.html#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb96-10"><a href="09-Intro-a-Shiny-exemples.html#cb96-10" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb96-11"><a href="09-Intro-a-Shiny-exemples.html#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb96-12"><a href="09-Intro-a-Shiny-exemples.html#cb96-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb96-13"><a href="09-Intro-a-Shiny-exemples.html#cb96-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-14"><a href="09-Intro-a-Shiny-exemples.html#cb96-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb96-15"><a href="09-Intro-a-Shiny-exemples.html#cb96-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb96-16"><a href="09-Intro-a-Shiny-exemples.html#cb96-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb96-17"><a href="09-Intro-a-Shiny-exemples.html#cb96-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb96-18"><a href="09-Intro-a-Shiny-exemples.html#cb96-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb96-19"><a href="09-Intro-a-Shiny-exemples.html#cb96-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb96-20"><a href="09-Intro-a-Shiny-exemples.html#cb96-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb96-21"><a href="09-Intro-a-Shiny-exemples.html#cb96-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb96-22"><a href="09-Intro-a-Shiny-exemples.html#cb96-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">radioButtons</span>(<span class="at">inputId =</span> <span class="st">&quot;region&quot;</span>, </span>
<span id="cb96-23"><a href="09-Intro-a-Shiny-exemples.html#cb96-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">label =</span> <span class="st">&quot;Choix de la région&quot;</span>,</span>
<span id="cb96-24"><a href="09-Intro-a-Shiny-exemples.html#cb96-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">choices =</span> <span class="fu">unique</span>(dt_aidesCovid<span class="sc">$</span>reg_name), <span class="co">#ou indiquer &#39;nom_regions&#39;</span></span>
<span id="cb96-25"><a href="09-Intro-a-Shiny-exemples.html#cb96-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">selected =</span> <span class="st">&quot;Île-de-France&quot;</span>),</span>
<span id="cb96-26"><a href="09-Intro-a-Shiny-exemples.html#cb96-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb96-27"><a href="09-Intro-a-Shiny-exemples.html#cb96-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-28"><a href="09-Intro-a-Shiny-exemples.html#cb96-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb96-29"><a href="09-Intro-a-Shiny-exemples.html#cb96-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb96-30"><a href="09-Intro-a-Shiny-exemples.html#cb96-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb96-31"><a href="09-Intro-a-Shiny-exemples.html#cb96-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb96-32"><a href="09-Intro-a-Shiny-exemples.html#cb96-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-33"><a href="09-Intro-a-Shiny-exemples.html#cb96-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-34"><a href="09-Intro-a-Shiny-exemples.html#cb96-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-35"><a href="09-Intro-a-Shiny-exemples.html#cb96-35" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb96-36"><a href="09-Intro-a-Shiny-exemples.html#cb96-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-37"><a href="09-Intro-a-Shiny-exemples.html#cb96-37" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb96-38"><a href="09-Intro-a-Shiny-exemples.html#cb96-38" aria-hidden="true" tabindex="-1"></a>      dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb96-39"><a href="09-Intro-a-Shiny-exemples.html#cb96-39" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(reg_name <span class="sc">==</span> <span class="st">&quot;Île-de-France&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb96-40"><a href="09-Intro-a-Shiny-exemples.html#cb96-40" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>total_meuros) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span>input<span class="sc">$</span>classes)</span>
<span id="cb96-41"><a href="09-Intro-a-Shiny-exemples.html#cb96-41" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb96-42"><a href="09-Intro-a-Shiny-exemples.html#cb96-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-43"><a href="09-Intro-a-Shiny-exemples.html#cb96-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb96-44"><a href="09-Intro-a-Shiny-exemples.html#cb96-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-45"><a href="09-Intro-a-Shiny-exemples.html#cb96-45" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Enfin, là encore, il faut introduire la réactivité et “connecter” la partie <strong><code>UI</code></strong> et la partie <strong><code>server</code></strong>, en remplaçant le nom de la région dans le <code>filter(reg_name == )</code> par le nom de l’<code>inputId</code> indiqué dans notre “radioButtons” :</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="09-Intro-a-Shiny-exemples.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb97-2"><a href="09-Intro-a-Shiny-exemples.html#cb97-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb97-3"><a href="09-Intro-a-Shiny-exemples.html#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="09-Intro-a-Shiny-exemples.html#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Quelques modifications du fichier initial de données</span></span>
<span id="cb97-5"><a href="09-Intro-a-Shiny-exemples.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dt_aidesCovid &lt;- dt_aidesCovid %&gt;% mutate(reg_name=as.factor(reg_name))</span></span>
<span id="cb97-6"><a href="09-Intro-a-Shiny-exemples.html#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="co"># nom_regions &lt;- levels(dt_aidesCovid$reg_name)</span></span>
<span id="cb97-7"><a href="09-Intro-a-Shiny-exemples.html#cb97-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-8"><a href="09-Intro-a-Shiny-exemples.html#cb97-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-9"><a href="09-Intro-a-Shiny-exemples.html#cb97-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb97-10"><a href="09-Intro-a-Shiny-exemples.html#cb97-10" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb97-11"><a href="09-Intro-a-Shiny-exemples.html#cb97-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb97-12"><a href="09-Intro-a-Shiny-exemples.html#cb97-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb97-13"><a href="09-Intro-a-Shiny-exemples.html#cb97-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb97-14"><a href="09-Intro-a-Shiny-exemples.html#cb97-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb97-15"><a href="09-Intro-a-Shiny-exemples.html#cb97-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb97-16"><a href="09-Intro-a-Shiny-exemples.html#cb97-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb97-17"><a href="09-Intro-a-Shiny-exemples.html#cb97-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb97-18"><a href="09-Intro-a-Shiny-exemples.html#cb97-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb97-19"><a href="09-Intro-a-Shiny-exemples.html#cb97-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb97-20"><a href="09-Intro-a-Shiny-exemples.html#cb97-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb97-21"><a href="09-Intro-a-Shiny-exemples.html#cb97-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb97-22"><a href="09-Intro-a-Shiny-exemples.html#cb97-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">radioButtons</span>(<span class="at">inputId =</span> <span class="st">&quot;region&quot;</span>, </span>
<span id="cb97-23"><a href="09-Intro-a-Shiny-exemples.html#cb97-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">label =</span> <span class="st">&quot;Choix de la région&quot;</span>,</span>
<span id="cb97-24"><a href="09-Intro-a-Shiny-exemples.html#cb97-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">choices =</span> <span class="fu">unique</span>(dt_aidesCovid<span class="sc">$</span>reg_name), <span class="co">#ou indiquer &#39;nom_regions&#39;</span></span>
<span id="cb97-25"><a href="09-Intro-a-Shiny-exemples.html#cb97-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">selected =</span> <span class="st">&quot;Île-de-France&quot;</span>),</span>
<span id="cb97-26"><a href="09-Intro-a-Shiny-exemples.html#cb97-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb97-27"><a href="09-Intro-a-Shiny-exemples.html#cb97-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-28"><a href="09-Intro-a-Shiny-exemples.html#cb97-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb97-29"><a href="09-Intro-a-Shiny-exemples.html#cb97-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb97-30"><a href="09-Intro-a-Shiny-exemples.html#cb97-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb97-31"><a href="09-Intro-a-Shiny-exemples.html#cb97-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb97-32"><a href="09-Intro-a-Shiny-exemples.html#cb97-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb97-33"><a href="09-Intro-a-Shiny-exemples.html#cb97-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb97-34"><a href="09-Intro-a-Shiny-exemples.html#cb97-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-35"><a href="09-Intro-a-Shiny-exemples.html#cb97-35" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb97-36"><a href="09-Intro-a-Shiny-exemples.html#cb97-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb97-37"><a href="09-Intro-a-Shiny-exemples.html#cb97-37" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb97-38"><a href="09-Intro-a-Shiny-exemples.html#cb97-38" aria-hidden="true" tabindex="-1"></a>      dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb97-39"><a href="09-Intro-a-Shiny-exemples.html#cb97-39" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(reg_name <span class="sc">==</span> input<span class="sc">$</span>region) <span class="sc">%&gt;%</span> </span>
<span id="cb97-40"><a href="09-Intro-a-Shiny-exemples.html#cb97-40" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>total_meuros) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span>input<span class="sc">$</span>classes)</span>
<span id="cb97-41"><a href="09-Intro-a-Shiny-exemples.html#cb97-41" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb97-42"><a href="09-Intro-a-Shiny-exemples.html#cb97-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-43"><a href="09-Intro-a-Shiny-exemples.html#cb97-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb97-44"><a href="09-Intro-a-Shiny-exemples.html#cb97-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb97-45"><a href="09-Intro-a-Shiny-exemples.html#cb97-45" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
<div id="modification-du-graphique-selon-une-variable-au-choix-parmi-deux" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> Modification du graphique : selon une variable au choix parmi deux<a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On peut maintenant vouloir montrer un graphique (toujours le même histogramme) selon au choix deux variables : soit le montant total des aides en milliers d’euros, soit le nombre d’entreprises concernées (variable <code>nombre_entreprises</code>).</p>
<p>Procédons comme précédemment : créons un nouveau widget avec par exemple <code>selectInput()</code>, dont l’<code>inputID</code> sera “variable” et l’argument <code>choices =</code> donne les deux variables choisies ; pour cela, on peut utiliser une fonction <code>list()</code> et indiquer le nom des deux variables, soient <code>total_meuros</code> et <code>nombre_entreprises</code>.<br />
Et ensuite, dans la fonction <strong>server</strong>, remplaçons <code>x=total_meuros</code> par <code>x=input$variable</code> et voyons si cela marche !</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="09-Intro-a-Shiny-exemples.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb98-2"><a href="09-Intro-a-Shiny-exemples.html#cb98-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb98-3"><a href="09-Intro-a-Shiny-exemples.html#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="09-Intro-a-Shiny-exemples.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Quelques modifications du fichier initial de données</span></span>
<span id="cb98-5"><a href="09-Intro-a-Shiny-exemples.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dt_aidesCovid &lt;- dt_aidesCovid %&gt;% mutate(reg_name=as.factor(reg_name))</span></span>
<span id="cb98-6"><a href="09-Intro-a-Shiny-exemples.html#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="co"># nom_regions &lt;- levels(dt_aidesCovid$reg_name)</span></span>
<span id="cb98-7"><a href="09-Intro-a-Shiny-exemples.html#cb98-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-8"><a href="09-Intro-a-Shiny-exemples.html#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="09-Intro-a-Shiny-exemples.html#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb98-10"><a href="09-Intro-a-Shiny-exemples.html#cb98-10" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb98-11"><a href="09-Intro-a-Shiny-exemples.html#cb98-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb98-12"><a href="09-Intro-a-Shiny-exemples.html#cb98-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb98-13"><a href="09-Intro-a-Shiny-exemples.html#cb98-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-14"><a href="09-Intro-a-Shiny-exemples.html#cb98-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb98-15"><a href="09-Intro-a-Shiny-exemples.html#cb98-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb98-16"><a href="09-Intro-a-Shiny-exemples.html#cb98-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb98-17"><a href="09-Intro-a-Shiny-exemples.html#cb98-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb98-18"><a href="09-Intro-a-Shiny-exemples.html#cb98-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb98-19"><a href="09-Intro-a-Shiny-exemples.html#cb98-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb98-20"><a href="09-Intro-a-Shiny-exemples.html#cb98-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb98-21"><a href="09-Intro-a-Shiny-exemples.html#cb98-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb98-22"><a href="09-Intro-a-Shiny-exemples.html#cb98-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">radioButtons</span>(<span class="at">inputId =</span> <span class="st">&quot;region&quot;</span>, </span>
<span id="cb98-23"><a href="09-Intro-a-Shiny-exemples.html#cb98-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">label =</span> <span class="st">&quot;Choix de la région&quot;</span>,</span>
<span id="cb98-24"><a href="09-Intro-a-Shiny-exemples.html#cb98-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">choices =</span> <span class="fu">unique</span>(dt_aidesCovid<span class="sc">$</span>reg_name), <span class="co">#ou indiquer &#39;nom_regions&#39;</span></span>
<span id="cb98-25"><a href="09-Intro-a-Shiny-exemples.html#cb98-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">selected =</span> <span class="st">&quot;Île-de-France&quot;</span>),</span>
<span id="cb98-26"><a href="09-Intro-a-Shiny-exemples.html#cb98-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;variable&quot;</span>, </span>
<span id="cb98-27"><a href="09-Intro-a-Shiny-exemples.html#cb98-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Choix de la variable&quot;</span>, </span>
<span id="cb98-28"><a href="09-Intro-a-Shiny-exemples.html#cb98-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">list</span>(<span class="st">&quot;nombre_entreprises&quot;</span>, <span class="st">&quot;total_meuros&quot;</span>), </span>
<span id="cb98-29"><a href="09-Intro-a-Shiny-exemples.html#cb98-29" aria-hidden="true" tabindex="-1"></a>                  <span class="at">selected =</span> <span class="st">&quot;total_meuros&quot;</span>),</span>
<span id="cb98-30"><a href="09-Intro-a-Shiny-exemples.html#cb98-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb98-31"><a href="09-Intro-a-Shiny-exemples.html#cb98-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb98-32"><a href="09-Intro-a-Shiny-exemples.html#cb98-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb98-33"><a href="09-Intro-a-Shiny-exemples.html#cb98-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb98-34"><a href="09-Intro-a-Shiny-exemples.html#cb98-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb98-35"><a href="09-Intro-a-Shiny-exemples.html#cb98-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb98-36"><a href="09-Intro-a-Shiny-exemples.html#cb98-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb98-37"><a href="09-Intro-a-Shiny-exemples.html#cb98-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb98-38"><a href="09-Intro-a-Shiny-exemples.html#cb98-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-39"><a href="09-Intro-a-Shiny-exemples.html#cb98-39" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb98-40"><a href="09-Intro-a-Shiny-exemples.html#cb98-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-41"><a href="09-Intro-a-Shiny-exemples.html#cb98-41" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb98-42"><a href="09-Intro-a-Shiny-exemples.html#cb98-42" aria-hidden="true" tabindex="-1"></a>      dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb98-43"><a href="09-Intro-a-Shiny-exemples.html#cb98-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(reg_name <span class="sc">==</span> input<span class="sc">$</span>region) <span class="sc">%&gt;%</span> </span>
<span id="cb98-44"><a href="09-Intro-a-Shiny-exemples.html#cb98-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>input<span class="sc">$</span>variable) <span class="sc">+</span> </span>
<span id="cb98-45"><a href="09-Intro-a-Shiny-exemples.html#cb98-45" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">geom_histogram</span>(<span class="at">bins=</span>input<span class="sc">$</span>classes)</span>
<span id="cb98-46"><a href="09-Intro-a-Shiny-exemples.html#cb98-46" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb98-47"><a href="09-Intro-a-Shiny-exemples.html#cb98-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb98-48"><a href="09-Intro-a-Shiny-exemples.html#cb98-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb98-49"><a href="09-Intro-a-Shiny-exemples.html#cb98-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-50"><a href="09-Intro-a-Shiny-exemples.html#cb98-50" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Et non cela ne fonctionne pas. En réalité, comme nous avons utilisé dans <code>choices =</code> un fonction <code>list()</code> qui fait appel à des variables de type caractère, la fonction <code>ggplot() + aes(x = )</code> ne comprend pas que la variable appelée est bien une variable numérique, elle croît en quelque sorte que c’est une variable caractère. Il faut donc dire à la fonction <code>ggplot()</code> ici que le nom de la variable est de type “string” mais qu’elle comporte bien des valeurs numériques donc compatible avec un histogramme : pour cela, au lieu de <code>ggplot() + aes(x = )</code>, il faut utiliser <code>ggplot() + aes_string(x = )</code>.</p>
<p>Réessayons :</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="09-Intro-a-Shiny-exemples.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement du fichier final</span></span>
<span id="cb99-2"><a href="09-Intro-a-Shiny-exemples.html#cb99-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb99-3"><a href="09-Intro-a-Shiny-exemples.html#cb99-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-4"><a href="09-Intro-a-Shiny-exemples.html#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Quelques modifications du fichier initial de données</span></span>
<span id="cb99-5"><a href="09-Intro-a-Shiny-exemples.html#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dt_aidesCovid &lt;- dt_aidesCovid %&gt;% mutate(reg_name=as.factor(reg_name))</span></span>
<span id="cb99-6"><a href="09-Intro-a-Shiny-exemples.html#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co"># nom_regions &lt;- levels(dt_aidesCovid$reg_name)</span></span>
<span id="cb99-7"><a href="09-Intro-a-Shiny-exemples.html#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="09-Intro-a-Shiny-exemples.html#cb99-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-9"><a href="09-Intro-a-Shiny-exemples.html#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition UI et Server de l&#39;application Shiny</span></span>
<span id="cb99-10"><a href="09-Intro-a-Shiny-exemples.html#cb99-10" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb99-11"><a href="09-Intro-a-Shiny-exemples.html#cb99-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Titre de l&#39;application</span></span>
<span id="cb99-12"><a href="09-Intro-a-Shiny-exemples.html#cb99-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Aides aux entreprises durant la crise du Covid-19&quot;</span>),</span>
<span id="cb99-13"><a href="09-Intro-a-Shiny-exemples.html#cb99-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb99-14"><a href="09-Intro-a-Shiny-exemples.html#cb99-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Définition du Widget - ici un slider en vue de construire un histogramme</span></span>
<span id="cb99-15"><a href="09-Intro-a-Shiny-exemples.html#cb99-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb99-16"><a href="09-Intro-a-Shiny-exemples.html#cb99-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb99-17"><a href="09-Intro-a-Shiny-exemples.html#cb99-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;classes&quot;</span>,</span>
<span id="cb99-18"><a href="09-Intro-a-Shiny-exemples.html#cb99-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Nombres de classes&quot;</span>,</span>
<span id="cb99-19"><a href="09-Intro-a-Shiny-exemples.html#cb99-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb99-20"><a href="09-Intro-a-Shiny-exemples.html#cb99-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">150</span>,</span>
<span id="cb99-21"><a href="09-Intro-a-Shiny-exemples.html#cb99-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb99-22"><a href="09-Intro-a-Shiny-exemples.html#cb99-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">radioButtons</span>(<span class="at">inputId =</span> <span class="st">&quot;region&quot;</span>, </span>
<span id="cb99-23"><a href="09-Intro-a-Shiny-exemples.html#cb99-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">label =</span> <span class="st">&quot;Choix de la région&quot;</span>,</span>
<span id="cb99-24"><a href="09-Intro-a-Shiny-exemples.html#cb99-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">choices =</span> <span class="fu">unique</span>(dt_aidesCovid<span class="sc">$</span>reg_name), <span class="co">#ou indiquer &#39;nom_regions&#39;</span></span>
<span id="cb99-25"><a href="09-Intro-a-Shiny-exemples.html#cb99-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">selected =</span> <span class="st">&quot;Île-de-France&quot;</span>),</span>
<span id="cb99-26"><a href="09-Intro-a-Shiny-exemples.html#cb99-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;variable&quot;</span>, </span>
<span id="cb99-27"><a href="09-Intro-a-Shiny-exemples.html#cb99-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;Choix de la variable&quot;</span>, </span>
<span id="cb99-28"><a href="09-Intro-a-Shiny-exemples.html#cb99-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">list</span>(<span class="st">&quot;nombre_entreprises&quot;</span>, <span class="st">&quot;total_meuros&quot;</span>), </span>
<span id="cb99-29"><a href="09-Intro-a-Shiny-exemples.html#cb99-29" aria-hidden="true" tabindex="-1"></a>                  <span class="at">selected =</span> <span class="st">&quot;total_meuros&quot;</span>)</span>
<span id="cb99-30"><a href="09-Intro-a-Shiny-exemples.html#cb99-30" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb99-31"><a href="09-Intro-a-Shiny-exemples.html#cb99-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb99-32"><a href="09-Intro-a-Shiny-exemples.html#cb99-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Graphe montré à l&#39;utilisateur</span></span>
<span id="cb99-33"><a href="09-Intro-a-Shiny-exemples.html#cb99-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb99-34"><a href="09-Intro-a-Shiny-exemples.html#cb99-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;histPlot&quot;</span>)</span>
<span id="cb99-35"><a href="09-Intro-a-Shiny-exemples.html#cb99-35" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb99-36"><a href="09-Intro-a-Shiny-exemples.html#cb99-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb99-37"><a href="09-Intro-a-Shiny-exemples.html#cb99-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb99-38"><a href="09-Intro-a-Shiny-exemples.html#cb99-38" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb99-39"><a href="09-Intro-a-Shiny-exemples.html#cb99-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb99-40"><a href="09-Intro-a-Shiny-exemples.html#cb99-40" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>histPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb99-41"><a href="09-Intro-a-Shiny-exemples.html#cb99-41" aria-hidden="true" tabindex="-1"></a>      dt_aidesCovid <span class="sc">%&gt;%</span>  </span>
<span id="cb99-42"><a href="09-Intro-a-Shiny-exemples.html#cb99-42" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(reg_name <span class="sc">==</span> input<span class="sc">$</span>region) <span class="sc">%&gt;%</span> </span>
<span id="cb99-43"><a href="09-Intro-a-Shiny-exemples.html#cb99-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes_string</span>(<span class="at">x=</span>input<span class="sc">$</span>variable) <span class="sc">+</span> </span>
<span id="cb99-44"><a href="09-Intro-a-Shiny-exemples.html#cb99-44" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">geom_histogram</span>(<span class="at">bins=</span>input<span class="sc">$</span>classes)</span>
<span id="cb99-45"><a href="09-Intro-a-Shiny-exemples.html#cb99-45" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb99-46"><a href="09-Intro-a-Shiny-exemples.html#cb99-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb99-47"><a href="09-Intro-a-Shiny-exemples.html#cb99-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb99-48"><a href="09-Intro-a-Shiny-exemples.html#cb99-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb99-49"><a href="09-Intro-a-Shiny-exemples.html#cb99-49" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>

</div>
</div>



<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="08-Intro-a-Shiny-theorique.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="10-Ggplot-theorique.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/github.io-Data-Mining/master/09-Intro-a-Shiny-exemples.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
