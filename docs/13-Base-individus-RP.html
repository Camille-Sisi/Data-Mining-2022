<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 13 Nouvelle base de données individuelles à prendre en main : le RP 2018 | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 13 Nouvelle base de données individuelles à prendre en main : le RP 2018 | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 13 Nouvelle base de données individuelles à prendre en main : le RP 2018 | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />


<meta name="date" content="2023-02-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="12-Retour-sur-Shiny.html"/>
<link rel="next" href="14-Clustering-theorique.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Jeu-de-donnees.html"><a href="01-Jeu-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération du jeu de données sur une API</a></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#séparer-les-variables-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Séparer les variables, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Enregistrement-tables-donnees.html"><a href="04-Enregistrement-tables-donnees.html"><i class="fa fa-check"></i><b>4</b> Enregistrement des tables</a></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-cohorte-des-bacheliers-2014-inscrits-en-première-année-de-licence-en-2014-2015"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-Fonctions.html"><a href="06-Fonctions.html"><i class="fa fa-check"></i><b>6</b> Systématiser nos procédures : construire une fonction</a></li>
<li class="chapter" data-level="7" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html"><i class="fa fa-check"></i><b>7</b> (reprise de l’)Analyse descriptive</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html#caractéristiques-de-la-cohorte-des-bacheliers-2014-inscrits-en-première-année-de-licence-en-2014-2015-1"><i class="fa fa-check"></i><b>7.1</b> Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015</a></li>
<li class="chapter" data-level="7.2" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html#profils-des-étudiants-selon-leur-situation-en-fin-de-l1"><i class="fa fa-check"></i><b>7.2</b> Profils des étudiants selon leur situation en fin de L1</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Introduction à ShinyApp</b></span></li>
<li class="chapter" data-level="8" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html"><i class="fa fa-check"></i><b>8</b> Les applications interactives avec Shiny App</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-structure-générale-dune-application-shiny"><i class="fa fa-check"></i><b>8.1</b> La structure générale d’une application Shiny</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-partie-ui"><i class="fa fa-check"></i><b>8.1.1</b> La partie “UI”</a></li>
<li class="chapter" data-level="8.1.2" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-partie-server"><i class="fa fa-check"></i><b>8.1.2</b> La partie “Server”</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-réactivité"><i class="fa fa-check"></i><b>8.2</b> La réactivité</a></li>
<li class="chapter" data-level="8.3" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#un-exemple-avec-le-code-du-script-par-défaut"><i class="fa fa-check"></i><b>8.3</b> Un exemple avec le code du script par défaut</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html"><i class="fa fa-check"></i><b>9</b> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#application-vide"><i class="fa fa-check"></i><b>9.1</b> Application vide</a></li>
<li class="chapter" data-level="9.2" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget"><i class="fa fa-check"></i><b>9.2</b> Ajout d’un titre et d’un widget</a></li>
<li class="chapter" data-level="9.3" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#ajout-dun-graphique"><i class="fa fa-check"></i><b>9.3</b> Ajout d’un graphique</a></li>
<li class="chapter" data-level="9.4" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable"><i class="fa fa-check"></i><b>9.4</b> Modification du graphique : filtrer selon une variable</a></li>
<li class="chapter" data-level="9.5" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux"><i class="fa fa-check"></i><b>9.5</b> Modification du graphique : selon une variable au choix parmi deux</a></li>
</ul></li>
<li class="part"><span><b>Séances 4 et 5 : Data Visualization</b></span></li>
<li class="chapter" data-level="10" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html"><i class="fa fa-check"></i><b>10</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>10.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>10.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>10.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>10.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>10.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="10.1.5" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>10.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="10.1.6" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>10.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="10.1.7" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>10.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="10.1.8" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>10.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="10.1.9" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>10.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>10.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html"><i class="fa fa-check"></i><b>11</b> Le package Ggplot en pratiques</a>
<ul>
<li class="chapter" data-level="11.1" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>11.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="11.2" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>11.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#distribution-du-montant-total-des-aides-financières-par-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.1</b> Distribution du montant total des aides financières, par secteur d’activité</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-des-aides-financières-par-région"><i class="fa fa-check"></i><b>11.2.2</b> Comparaison des montants moyen et médian des aides financières, par région</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#lien-entre-le-montant-moyen-des-aides-versées-et-le-nombre-moyen-dentreprises-bénéficiaires-par-secteur-dactivité-puis-par-région"><i class="fa fa-check"></i><b>11.2.3</b> Lien entre le montant moyen des aides versées et le nombre moyen d’entreprises bénéficiaires, par secteur d’activité puis par région</a></li>
<li class="chapter" data-level="11.2.4" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#montant-moyen-des-aides-versées-par-entreprise-dans-chaque-région-ou-chaque-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.4</b> Montant moyen des aides versées par entreprise dans chaque région ou chaque secteur d’activité</a></li>
<li class="chapter" data-level="11.2.5" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#top-5-des-aides-financières-versées-selon-la-région-ou-le-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.5</b> Top 5 des aides financières versées selon la région ou le secteur d’activité</a></li>
<li class="chapter" data-level="11.2.6" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>11.2.6</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html"><i class="fa fa-check"></i><b>12</b> Application sur Shiny</a>
<ul>
<li class="chapter" data-level="12.1" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#application-avec-un-tableau-et-un-graphique"><i class="fa fa-check"></i><b>12.1</b> Application avec un tableau et un graphique</a></li>
<li class="chapter" data-level="12.2" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-appliquée-à-la-table-de-données"><i class="fa fa-check"></i><b>12.2</b> Introduction d’une réactivité appliquée à la table de données</a></li>
<li class="chapter" data-level="12.3" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-sans-changer-les-outputs-contexte-réactif"><i class="fa fa-check"></i><b>12.3</b> Introduction d’une réactivité sur les inputs sans changer les outputs (contexte réactif)</a></li>
<li class="chapter" data-level="12.4" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-et-les-outputs"><i class="fa fa-check"></i><b>12.4</b> Introduction d’une réactivité sur les inputs ET les outputs</a></li>
</ul></li>
<li class="part"><span><b>Séances 6 et 7 : Clustering</b></span></li>
<li class="chapter" data-level="13" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html"><i class="fa fa-check"></i><b>13</b> Nouvelle base de données individuelles à prendre en main : le RP 2018</a>
<ul>
<li class="chapter" data-level="13.1" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>13.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="13.2" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#prise-en-main-rapide"><i class="fa fa-check"></i><b>13.2</b> Prise en main rapide</a></li>
<li class="chapter" data-level="13.3" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#tableaux-de-contingence-par-iris-découpage-territorial-infracommunal"><i class="fa fa-check"></i><b>13.3</b> Tableaux de contingence par IRIS (découpage territorial infracommunal)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html"><i class="fa fa-check"></i><b>14</b> Clustering : aspects théoriques</a>
<ul>
<li class="chapter" data-level="14.1" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html#la-classification-ascendante-hiérarchique-cah"><i class="fa fa-check"></i><b>14.1</b> La classification ascendante hiérarchique (CAH)</a></li>
<li class="chapter" data-level="14.2" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html#la-méthode-des-centres-mobiles-et-sa-variante-les-k-means"><i class="fa fa-check"></i><b>14.2</b> La méthode des centres mobiles et sa variante, <em>les K-means</em></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html"><i class="fa fa-check"></i><b>15</b> Clustering : application sur le RP 2018</a>
<ul>
<li class="chapter" data-level="15.1" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#choix-des-variables-et-préparation-du-tableau-final"><i class="fa fa-check"></i><b>15.1</b> Choix des variables et préparation du tableau final</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#variables-socio-professionnelles-caractérisant-les-individushabitants-de-notre-commune"><i class="fa fa-check"></i><b>15.1.1</b> Variables socio-professionnelles caractérisant les individus/habitants de notre commune</a></li>
<li class="chapter" data-level="15.1.2" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#création-des-différents-tableaux-de-contingence"><i class="fa fa-check"></i><b>15.1.2</b> Création des différents tableaux de contingence</a></li>
<li class="chapter" data-level="15.1.3" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#création-du-tableau-final"><i class="fa fa-check"></i><b>15.1.3</b> Création du tableau final</a></li>
<li class="chapter" data-level="15.1.4" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#choix-des-variables-actives-dans-le-clustering"><i class="fa fa-check"></i><b>15.1.4</b> choix des variables actives dans le clustering</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#la-méthode-de-la-cah-appliquée-à-nos-données"><i class="fa fa-check"></i><b>15.2</b> La méthode de la CAH appliquée à nos données</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#constitution-des-classes"><i class="fa fa-check"></i><b>15.2.1</b> Constitution des classes</a></li>
<li class="chapter" data-level="15.2.2" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#visualisation-sur-la-carte-de-la-commune"><i class="fa fa-check"></i><b>15.2.2</b> Visualisation sur la carte de la commune</a></li>
<li class="chapter" data-level="15.2.3" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#interprétation"><i class="fa fa-check"></i><b>15.2.3</b> Interprétation</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c13-Base-individus-RP" class="section level1 hasAnchor" number="13">
<h1><span class="header-section-number">Section 13</span> Nouvelle base de données individuelles à prendre en main : le RP 2018<a href="13-Base-individus-RP.html#c13-Base-individus-RP" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">

<div id="les-données-du-recensement-de-la-population-rp" class="section level2 hasAnchor" number="13.1">
<h2><span class="header-section-number">13.1</span> Les données du Recensement de la Population (RP)<a href="13-Base-individus-RP.html#les-données-du-recensement-de-la-population-rp" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Il existe plusieurs fichiers disponibles sur le site de l’Insee concernant l’enquête du Recensement de la Population, la dernière année disponible datant de 2018. Ces fichiers sont lourds, ils peuvent être téléchargés par zone, c’est ce que nous allons faire. On va ainsi s’intéresser au fichier “Individus localisés au canton-ou-ville” pour la zone A, c’est-à-dire l’Île-de-France.</p>
<p>Soit vous téléchargez le fichier <em>via</em> internet et l’enregistrez dans un de vos dossiers bien spécifiés et vous le “dézippez”, soit vous le téléchargez et dézipper directement dans <code>R</code> comme cela :</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="13-Base-individus-RP.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="at">url=</span><span class="st">&quot;https://www.insee.fr/fr/statistiques/fichier/5542859/RP2018_INDCVIZA_csv.zip&quot;</span>,</span>
<span id="cb131-2"><a href="13-Base-individus-RP.html#cb131-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="st">&quot;data/RP2018_INDCVIZA_csv.zip&quot;</span>)</span>
<span id="cb131-3"><a href="13-Base-individus-RP.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Le fichier a donc été téléchargé dans le dossier intitulé &quot;data&quot; du projet R, on va  </span></span>
<span id="cb131-4"><a href="13-Base-individus-RP.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="co"># maintenant le dézipper et enregistrer les fichiers extraits dans le même dossier.</span></span>
<span id="cb131-5"><a href="13-Base-individus-RP.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span>(<span class="st">&quot;data/RP2018_INDCVIZA_csv.zip&quot;</span>, <span class="at">exdir =</span> <span class="st">&quot;data&quot;</span>)</span></code></pre></div>
<p>Il nous reste plus qu’à charger les données dans R : pour cela on utilise la commande <code>fread</code> du package <strong><code>data.table</code></strong> (à installer avant) car cela va bien plus vite que les fonctions habituelles du type <code>read.csv</code> lorsqu’on a de gros fichiers comme cela ; on indique l’option <code>stringsAsFactors=TRUE</code> pour que les variables caractères soient directement transformées en variables “factor”, et on transforme l’objet obtenu en <code>data.frame</code>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="13-Base-individus-RP.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;data.table&quot;)</span></span>
<span id="cb132-2"><a href="13-Base-individus-RP.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb132-3"><a href="13-Base-individus-RP.html#cb132-3" aria-hidden="true" tabindex="-1"></a>RP <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;data/FD_INDCVIZA_2018.csv&quot;</span>, <span class="at">stringsAsFactors=</span><span class="cn">TRUE</span>)</span>
<span id="cb132-4"><a href="13-Base-individus-RP.html#cb132-4" aria-hidden="true" tabindex="-1"></a>RP <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(RP)</span></code></pre></div>
<p>On a donc 65 variables et 4 355 977 observations.</p>
<p>On va faire un premier tri dans les variables pour ne garder que celles concernant l’individu et le logement, ainsi que les variables géographiques, qui nous seront utiles pour la suite.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="13-Base-individus-RP.html#cb133-1" aria-hidden="true" tabindex="-1"></a>RP <span class="ot">&lt;-</span> RP <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="13-Base-individus-RP.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;AGED&quot;</span>,<span class="st">&quot;AGEREV&quot;</span>,<span class="st">&quot;ANAI&quot;</span>, <span class="st">&quot;LPRF&quot;</span>,<span class="st">&quot;ORIDT&quot;</span>, <span class="st">&quot;NUMMI&quot;</span>, <span class="st">&quot;DEROU&quot;</span>, <span class="st">&quot;INFAM&quot;</span>,</span>
<span id="cb133-3"><a href="13-Base-individus-RP.html#cb133-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;INPER&quot;</span>, <span class="st">&quot;NPERR&quot;</span>, <span class="st">&quot;SFM&quot;</span>, <span class="st">&quot;TYPMC&quot;</span>, <span class="st">&quot;TYPMR&quot;</span>, <span class="st">&quot;VOIT&quot;</span>, <span class="st">&quot;INPERF&quot;</span>, <span class="st">&quot;LIENF&quot;</span>,</span>
<span id="cb133-4"><a href="13-Base-individus-RP.html#cb133-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;NE17FR&quot;</span>, <span class="st">&quot;NE24FR&quot;</span>, <span class="st">&quot;NE3FR&quot;</span>, <span class="st">&quot;NE5FR&quot;</span>, <span class="st">&quot;NENFR&quot;</span>, <span class="st">&quot;NUMF&quot;</span>, <span class="st">&quot;TYPFC&quot;</span>))</span></code></pre></div>
<p>Certaines des variables ont été codées comme numériques alors que, selon le dictionnaire des variables, elles devraient être toutes en caractères ou ici dans <code>R</code> en “factor”, on va regarder quelles variables sont concernées et on va les transformer pour qu’elles soient dans le bon format. On peut utiliser la fonction <code>select_if</code> déjà vue précédemment.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="13-Base-individus-RP.html#cb134-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="13-Base-individus-RP.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="13-Base-individus-RP.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code></pre></div>
<p>On en a 23 sur 88, mais attention il y a la variable de pondération <code>IPONDI</code> qui, elle, doit rester numérique, donc on peut procéder au changement de type pour l’ensemble de ces variables sauf celle de pondération, avec la fonction <code>mutate_at</code> en spécifiant l’ensemble des variables concernées (copiées-collées depuis la sortie précédente en veillant bien sûr à bien enlever <code>IPONDI</code>).</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="13-Base-individus-RP.html#cb135-1" aria-hidden="true" tabindex="-1"></a>RP <span class="ot">&lt;-</span> RP <span class="sc">%&gt;%</span> </span>
<span id="cb135-2"><a href="13-Base-individus-RP.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">&quot;AGER20&quot;</span>, <span class="st">&quot;AGEREVQ&quot;</span>, <span class="st">&quot;CATPC&quot;</span>, <span class="st">&quot;COUPLE&quot;</span>, <span class="st">&quot;CS1&quot;</span>, <span class="st">&quot;DEPT&quot;</span>, <span class="st">&quot;ETUD&quot;</span>, <span class="st">&quot;IMMI&quot;</span>, </span>
<span id="cb135-3"><a href="13-Base-individus-RP.html#cb135-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;INAI&quot;</span>, <span class="st">&quot;INATC&quot;</span>, <span class="st">&quot;MOCO&quot;</span>, <span class="st">&quot;MODV&quot;</span>, <span class="st">&quot;NAIDT&quot;</span>, <span class="st">&quot;REGION&quot;</span>, <span class="st">&quot;SEXE&quot;</span>, </span>
<span id="cb135-4"><a href="13-Base-individus-RP.html#cb135-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;STAT_CONJ&quot;</span>,<span class="st">&quot;TACT&quot;</span>, <span class="st">&quot;TACTD16&quot;</span>), factor)</span></code></pre></div>
<p>On peut enregistrer ce fichier, ainsi que celui contenant les métadonnées, dans le dossier <code>R</code> au format RDS.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="13-Base-individus-RP.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> RP,</span>
<span id="cb136-2"><a href="13-Base-individus-RP.html#cb136-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">&quot;data/indiv2018.Rdata&quot;</span>)</span>
<span id="cb136-3"><a href="13-Base-individus-RP.html#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="13-Base-individus-RP.html#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Lecture du fichier de métadonnées et enregistrement dans le dossier data</span></span>
<span id="cb136-5"><a href="13-Base-individus-RP.html#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="co"># de notre projet</span></span>
<span id="cb136-6"><a href="13-Base-individus-RP.html#cb136-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb136-7"><a href="13-Base-individus-RP.html#cb136-7" aria-hidden="true" tabindex="-1"></a>meta <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;data/varmod_INDCVI_2018.csv&quot;</span>)</span>
<span id="cb136-8"><a href="13-Base-individus-RP.html#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Enregistrement dans le dossier data</span></span>
<span id="cb136-9"><a href="13-Base-individus-RP.html#cb136-9" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> meta,</span>
<span id="cb136-10"><a href="13-Base-individus-RP.html#cb136-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">&quot;data/indiv_2018_meta.Rdata&quot;</span>)</span></code></pre></div>
</div>
<div id="prise-en-main-rapide" class="section level2 hasAnchor" number="13.2">
<h2><span class="header-section-number">13.2</span> Prise en main rapide<a href="13-Base-individus-RP.html#prise-en-main-rapide" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>L’une des difficultés pour l’analyse de cette base de données réside dans les différents niveaux présents : “individu” pour la personne de référence du ménage ; “ménage” regroupant l’ensemble des occupants d’une résidence principale, qu’ils aient ou non des liens de parenté ; “famille” partie d’un ménage comprenant au moins 2 personnes (par exemple, un couple, ou un adulte avec un enfant…) ; et enfin “logement” qui comprend ici les résidences principales et rassemble des informations décrivant les types de logement.<br />
Avec le tri effectué précédemment, nous n’avons plus que les variables décrivant le logement, celles décrivant l’individu et les variables géographiques.<br />
Il faut bien comprendre comment utiliser à bon escient ces différents niveaux, en particulier ici le niveau logement : pour toute variable de ce niveau, il faudra utiliser un filtre, c’est-à-dire ne prendre que la personne de référence du ménage (<code>LPRM=="1"</code>).</p>
<p>Il faut également penser que les données sont pondérées, donc pour sortir des statistiques descriptives, il faut à chaque fois mettre la variable de pondération <code>IPONDI</code>.</p>
<p>Par exemple, si l’on souhaite décrire le type de logement existant dans cette région :</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="13-Base-individus-RP.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(forcats)</span></span>
<span id="cb137-2"><a href="13-Base-individus-RP.html#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(gt)</span></span>
<span id="cb137-3"><a href="13-Base-individus-RP.html#cb137-3" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> </span>
<span id="cb137-4"><a href="13-Base-individus-RP.html#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(LPRM<span class="sc">==</span><span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb137-5"><a href="13-Base-individus-RP.html#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type_logement =</span> <span class="fu">case_when</span>(TYPL<span class="sc">==</span><span class="st">&quot;1&quot;</span> <span class="sc">~</span> <span class="st">&quot;Maisons&quot;</span>,</span>
<span id="cb137-6"><a href="13-Base-individus-RP.html#cb137-6" aria-hidden="true" tabindex="-1"></a>                                   TYPL<span class="sc">==</span><span class="st">&quot;2&quot;</span> <span class="sc">~</span> <span class="st">&quot;Appartements&quot;</span>,</span>
<span id="cb137-7"><a href="13-Base-individus-RP.html#cb137-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Autres&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb137-8"><a href="13-Base-individus-RP.html#cb137-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(type_logement, <span class="at">wt=</span>IPONDI) <span class="sc">%&gt;%</span> </span>
<span id="cb137-9"><a href="13-Base-individus-RP.html#cb137-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct=</span><span class="fu">prop.table</span>(n)<span class="sc">*</span><span class="dv">100</span>, <span class="at">pct=</span><span class="fu">round</span>(pct, <span class="dv">1</span>), <span class="at">n=</span><span class="fu">round</span>(n,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb137-10"><a href="13-Base-individus-RP.html#cb137-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb137-11"><a href="13-Base-individus-RP.html#cb137-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="dv">2</span>, <span class="at">sep_mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span></code></pre></div>
<div id="qcvhnmuupf" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qcvhnmuupf .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qcvhnmuupf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qcvhnmuupf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qcvhnmuupf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qcvhnmuupf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qcvhnmuupf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qcvhnmuupf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qcvhnmuupf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qcvhnmuupf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qcvhnmuupf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qcvhnmuupf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qcvhnmuupf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qcvhnmuupf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qcvhnmuupf .gt_from_md > :first-child {
  margin-top: 0;
}

#qcvhnmuupf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qcvhnmuupf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qcvhnmuupf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qcvhnmuupf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qcvhnmuupf .gt_row_group_first td {
  border-top-width: 2px;
}

#qcvhnmuupf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qcvhnmuupf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qcvhnmuupf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qcvhnmuupf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qcvhnmuupf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qcvhnmuupf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qcvhnmuupf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qcvhnmuupf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qcvhnmuupf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qcvhnmuupf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qcvhnmuupf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qcvhnmuupf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qcvhnmuupf .gt_left {
  text-align: left;
}

#qcvhnmuupf .gt_center {
  text-align: center;
}

#qcvhnmuupf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qcvhnmuupf .gt_font_normal {
  font-weight: normal;
}

#qcvhnmuupf .gt_font_bold {
  font-weight: bold;
}

#qcvhnmuupf .gt_font_italic {
  font-style: italic;
}

#qcvhnmuupf .gt_super {
  font-size: 65%;
}

#qcvhnmuupf .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#qcvhnmuupf .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#qcvhnmuupf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qcvhnmuupf .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#qcvhnmuupf .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#qcvhnmuupf .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">type_logement</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">pct</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Appartements</td>
<td class="gt_row gt_right">3 732 340</td>
<td class="gt_row gt_right">71.5</td></tr>
    <tr><td class="gt_row gt_left">Maisons</td>
<td class="gt_row gt_right">1 407 342</td>
<td class="gt_row gt_right">26.9</td></tr>
    <tr><td class="gt_row gt_left">Autres</td>
<td class="gt_row gt_right">82 501</td>
<td class="gt_row gt_right">1.6</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Ou connaître le nombre d’habitants de la région, puis selon le département :</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="13-Base-individus-RP.html#cb138-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Nombre_habitants =</span> <span class="fu">sum</span>(IPONDI)) <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="13-Base-individus-RP.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">sep_mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span></code></pre></div>
<div id="zbwssfffkx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zbwssfffkx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zbwssfffkx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zbwssfffkx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zbwssfffkx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zbwssfffkx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbwssfffkx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zbwssfffkx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zbwssfffkx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zbwssfffkx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zbwssfffkx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zbwssfffkx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zbwssfffkx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zbwssfffkx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zbwssfffkx .gt_from_md > :first-child {
  margin-top: 0;
}

#zbwssfffkx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zbwssfffkx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zbwssfffkx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zbwssfffkx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zbwssfffkx .gt_row_group_first td {
  border-top-width: 2px;
}

#zbwssfffkx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbwssfffkx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zbwssfffkx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zbwssfffkx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbwssfffkx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbwssfffkx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zbwssfffkx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zbwssfffkx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbwssfffkx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zbwssfffkx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbwssfffkx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zbwssfffkx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbwssfffkx .gt_left {
  text-align: left;
}

#zbwssfffkx .gt_center {
  text-align: center;
}

#zbwssfffkx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zbwssfffkx .gt_font_normal {
  font-weight: normal;
}

#zbwssfffkx .gt_font_bold {
  font-weight: bold;
}

#zbwssfffkx .gt_font_italic {
  font-style: italic;
}

#zbwssfffkx .gt_super {
  font-size: 65%;
}

#zbwssfffkx .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#zbwssfffkx .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#zbwssfffkx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zbwssfffkx .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#zbwssfffkx .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#zbwssfffkx .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Nombre_habitants</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">12 213 147</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="13-Base-individus-RP.html#cb139-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(DEPT) <span class="sc">%&gt;%</span> </span>
<span id="cb139-2"><a href="13-Base-individus-RP.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Nombre_habitants =</span> <span class="fu">sum</span>(IPONDI)) <span class="sc">%&gt;%</span> </span>
<span id="cb139-3"><a href="13-Base-individus-RP.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="dv">2</span>, <span class="at">sep_mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span></code></pre></div>
<div id="ptwzvivsuk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ptwzvivsuk .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ptwzvivsuk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ptwzvivsuk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ptwzvivsuk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ptwzvivsuk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ptwzvivsuk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ptwzvivsuk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ptwzvivsuk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ptwzvivsuk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ptwzvivsuk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ptwzvivsuk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ptwzvivsuk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ptwzvivsuk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ptwzvivsuk .gt_from_md > :first-child {
  margin-top: 0;
}

#ptwzvivsuk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ptwzvivsuk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ptwzvivsuk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ptwzvivsuk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ptwzvivsuk .gt_row_group_first td {
  border-top-width: 2px;
}

#ptwzvivsuk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptwzvivsuk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ptwzvivsuk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ptwzvivsuk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ptwzvivsuk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptwzvivsuk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ptwzvivsuk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ptwzvivsuk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ptwzvivsuk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ptwzvivsuk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptwzvivsuk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ptwzvivsuk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptwzvivsuk .gt_left {
  text-align: left;
}

#ptwzvivsuk .gt_center {
  text-align: center;
}

#ptwzvivsuk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ptwzvivsuk .gt_font_normal {
  font-weight: normal;
}

#ptwzvivsuk .gt_font_bold {
  font-weight: bold;
}

#ptwzvivsuk .gt_font_italic {
  font-style: italic;
}

#ptwzvivsuk .gt_super {
  font-size: 65%;
}

#ptwzvivsuk .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#ptwzvivsuk .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ptwzvivsuk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ptwzvivsuk .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#ptwzvivsuk .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#ptwzvivsuk .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">DEPT</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Nombre_habitants</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">75</td>
<td class="gt_row gt_right">2 175 768</td></tr>
    <tr><td class="gt_row gt_center">77</td>
<td class="gt_row gt_right">1 412 542</td></tr>
    <tr><td class="gt_row gt_center">78</td>
<td class="gt_row gt_right">1 441 063</td></tr>
    <tr><td class="gt_row gt_center">91</td>
<td class="gt_row gt_right">1 296 367</td></tr>
    <tr><td class="gt_row gt_center">92</td>
<td class="gt_row gt_right">1 619 438</td></tr>
    <tr><td class="gt_row gt_center">93</td>
<td class="gt_row gt_right">1 632 615</td></tr>
    <tr><td class="gt_row gt_center">94</td>
<td class="gt_row gt_right">1 396 676</td></tr>
    <tr><td class="gt_row gt_center">95</td>
<td class="gt_row gt_right">1 238 678</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="tableaux-de-contingence-par-iris-découpage-territorial-infracommunal" class="section level2 hasAnchor" number="13.3">
<h2><span class="header-section-number">13.3</span> Tableaux de contingence par IRIS (découpage territorial infracommunal)<a href="13-Base-individus-RP.html#tableaux-de-contingence-par-iris-découpage-territorial-infracommunal" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Dans l’analyse de <em>clustering</em> que nous allons réaliser ensuite, nous souhaitons décrire la population d’un département ou commune selon ses caractéristiques socio-démographiques et socio-professionnelles au niveau territorial le plus fin, autrement dit l’IRIS. Pour cela, il faut établir des statistiques du nombre de personnes concernées pour chaque caractéristique par IRIS du département ou de la commune choisie : on crée ainsi des <em>tableaux de contingence</em> par IRIS pour chacune de ces caractéristiques.<br />
Par exemple, pour connaître le nombre de chômeurs par IRIS du 12ème arrondissement de Paris, il faut : i) utiliser le code IRIS et récupérer les 5 premiers chiffres pour avoir le niveau commune (pour Paris, Marseille ou Lyon, on peut également utiliser la variable <code>ARM</code>), ii) filtrer pour n’avoir que les personnes dont l’activité est “chômeur” (<code>TACT == "12"</code>) et la commune correspondant au 12ème arrondissement, et iii) calculer la somme par IRIS :</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="13-Base-individus-RP.html#cb140-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> </span>
<span id="cb140-2"><a href="13-Base-individus-RP.html#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">COM =</span> <span class="fu">substr</span>(IRIS, <span class="dv">1</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb140-3"><a href="13-Base-individus-RP.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TACT <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">&amp;</span> COM <span class="sc">==</span> <span class="st">&quot;75112&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># ou ARM == &quot;75112&quot;</span></span>
<span id="cb140-4"><a href="13-Base-individus-RP.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IRIS) <span class="sc">%&gt;%</span>  </span>
<span id="cb140-5"><a href="13-Base-individus-RP.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(nb_chômeurs <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">sum</span>(IPONDI)))</span></code></pre></div>
<pre><code># A tibble: 57 x 2
   IRIS      nb_chômeurs
   &lt;fct&gt;           &lt;dbl&gt;
 1 751124501         252
 2 751124502         268
 3 751124503         133
 4 751124504         113
 5 751124505         145
 6 751124506         144
 7 751124507         123
 8 751124508         129
 9 751124509          89
10 751124510         179
# ... with 47 more rows</code></pre>
<p>Si on veut englober les arrondissements de l’Est parisien (11ème, 12ème et 20ème arrondissements de Paris) :</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="13-Base-individus-RP.html#cb142-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> </span>
<span id="cb142-2"><a href="13-Base-individus-RP.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">COM =</span> <span class="fu">substr</span>(IRIS, <span class="dv">1</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb142-3"><a href="13-Base-individus-RP.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TACT <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">&amp;</span> COM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>)) <span class="sc">%&gt;%</span>  </span>
<span id="cb142-4"><a href="13-Base-individus-RP.html#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IRIS) <span class="sc">%&gt;%</span></span>
<span id="cb142-5"><a href="13-Base-individus-RP.html#cb142-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(nb_chômeurs <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">sum</span>(IPONDI)))</span></code></pre></div>
<pre><code># A tibble: 192 x 2
   IRIS      nb_chômeurs
   &lt;fct&gt;           &lt;dbl&gt;
 1 751114101         274
 2 751114102         215
 3 751114103         143
 4 751114104         133
 5 751114105         111
 6 751114106         132
 7 751114107         185
 8 751114108         136
 9 751114109         216
10 751114110         171
# ... with 182 more rows</code></pre>
<p>Comme on va être amené à réaliser ces tableaux de contingence sur chaque caractéristique qui nous intéresse et que l’on veut mettre en variable d’entrée de l’analyse de <em>clustering</em>, on peut créer une fonction : cette fonction doit nous permettre d’avoir une somme par IRIS pour chaque variable qu’on utilisera dans notre analyse de <em>clustering</em>, selon que l’on se situe au niveau du département ou au niveau de la commune pour se laisser ultérieurement le choix ; de même on utilisera les <code>...</code> en argument de la fonction <code>group_by</code> car on pourra éventuellement avoir plusieurs variables de regroupement. La fonction que l’on appelera <code>sum_var_IRIS()</code> pourra être la suivante :</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="13-Base-individus-RP.html#cb144-1" aria-hidden="true" tabindex="-1"></a>sum_var_IRIS <span class="ot">&lt;-</span> <span class="cf">function</span>(data, codedept, codecom, ..., nom_var)</span>
<span id="cb144-2"><a href="13-Base-individus-RP.html#cb144-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb144-3"><a href="13-Base-individus-RP.html#cb144-3" aria-hidden="true" tabindex="-1"></a>  var_sum <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb144-4"><a href="13-Base-individus-RP.html#cb144-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">COM =</span> <span class="fu">substr</span>(IRIS,<span class="dv">1</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb144-5"><a href="13-Base-individus-RP.html#cb144-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(DEPT <span class="sc">%in%</span> codedept <span class="sc">|</span> COM <span class="sc">%in%</span> codecom) <span class="sc">%&gt;%</span></span>
<span id="cb144-6"><a href="13-Base-individus-RP.html#cb144-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb144-7"><a href="13-Base-individus-RP.html#cb144-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>({{ nom_var }} <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="fu">sum</span>(IPONDI)))</span>
<span id="cb144-8"><a href="13-Base-individus-RP.html#cb144-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb144-9"><a href="13-Base-individus-RP.html#cb144-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(var_sum)</span>
<span id="cb144-10"><a href="13-Base-individus-RP.html#cb144-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Pour vérifier que la fonction tourne bien, on procède au même exemple que précédemment, pour Paris 12ème puis l’Est parisien :</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="13-Base-individus-RP.html#cb145-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> <span class="fu">sum_var_IRIS</span>(<span class="at">codedept=</span><span class="st">&quot; &quot;</span>, <span class="at">codecom =</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), </span>
<span id="cb145-2"><a href="13-Base-individus-RP.html#cb145-2" aria-hidden="true" tabindex="-1"></a>                    IRIS, <span class="at">nom_var =</span> nbhab)</span></code></pre></div>
<pre><code># A tibble: 193 x 2
   IRIS      nbhab
   &lt;fct&gt;     &lt;dbl&gt;
 1 751114101  3145
 2 751114102  2335
 3 751114103  1824
 4 751114104  1547
 5 751114105  1932
 6 751114106  2622
 7 751114107  2560
 8 751114108  2333
 9 751114109  2833
10 751114110  1646
# ... with 183 more rows</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="13-Base-individus-RP.html#cb147-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TACT <span class="sc">==</span> <span class="st">&quot;12&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-2"><a href="13-Base-individus-RP.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum_var_IRIS</span>(<span class="at">codedept=</span><span class="st">&quot; &quot;</span>, <span class="at">codecom =</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), IRIS, </span>
<span id="cb147-3"><a href="13-Base-individus-RP.html#cb147-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">nom_var =</span> nbchom)</span></code></pre></div>
<pre><code># A tibble: 192 x 2
   IRIS      nbchom
   &lt;fct&gt;      &lt;dbl&gt;
 1 751114101    274
 2 751114102    215
 3 751114103    143
 4 751114104    133
 5 751114105    111
 6 751114106    132
 7 751114107    185
 8 751114108    136
 9 751114109    216
10 751114110    171
# ... with 182 more rows</code></pre>
<p>Il y a donc 193 IRIS dans l’Est parisien et on voit bien qu’on a bien une ligne par IRIS (1ère colonne) et une (seconde) colonne renseignant du nombre d’habitants, puis du nombre de chômeurs.</p>
<p>Mais pour des variables à plusieurs modalités, comme l’âge ou la PCS, il faut ajouter une étape supplémentaire car on aura d’abord plusieurs lignes (autant qu’il y a de modalités dans la variable) par IRIS. Par exemple, pour l’âge avec la variable <code>AGER20</code> :</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="13-Base-individus-RP.html#cb149-1" aria-hidden="true" tabindex="-1"></a>RP <span class="sc">%&gt;%</span> <span class="fu">sum_var_IRIS</span>(<span class="at">codedept =</span> <span class="st">&quot; &quot;</span>, <span class="at">codecom =</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), </span>
<span id="cb149-2"><a href="13-Base-individus-RP.html#cb149-2" aria-hidden="true" tabindex="-1"></a>                    IRIS, AGER20, <span class="at">nom_var =</span> Nb_age)</span></code></pre></div>
<pre><code>`summarise()` has grouped output by &#39;IRIS&#39;. You can override using the
`.groups` argument.</code></pre>
<pre><code># A tibble: 2,494 x 3
   IRIS      AGER20 Nb_age
   &lt;fct&gt;     &lt;fct&gt;   &lt;dbl&gt;
 1 751114101 2          95
 2 751114101 5          81
 3 751114101 10        131
 4 751114101 14        127
 5 751114101 17        108
 6 751114101 19         77
 7 751114101 24        215
 8 751114101 29        356
 9 751114101 39        502
10 751114101 54        577
# ... with 2,484 more rows</code></pre>
<p>Il faut donc créer une autre fonction que l’on va nommer <code>tab_cont_n_iris</code> pour créer un tableau de contingence avec une seule ligne par IRIS, et autant de colonnes qu’il y a de modalités dans cette variable. Pour cela, on peut utiliser la fonction <code>pivot_wider()</code> après la fonction déjà créée <code>sum_var_IRIS()</code>.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="13-Base-individus-RP.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum_var_IRIS</span>(RP, <span class="at">codedept =</span> <span class="st">&quot; &quot;</span>, <span class="at">codecom =</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>),</span>
<span id="cb152-2"><a href="13-Base-individus-RP.html#cb152-2" aria-hidden="true" tabindex="-1"></a>             IRIS, AGER20, <span class="at">nom_var =</span> Nb_age) <span class="sc">%&gt;%</span> </span>
<span id="cb152-3"><a href="13-Base-individus-RP.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> AGER20, <span class="at">values_from =</span> Nb_age, <span class="at">values_fill =</span> <span class="dv">0</span>, </span>
<span id="cb152-4"><a href="13-Base-individus-RP.html#cb152-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;age_&quot;</span>)</span></code></pre></div>
<pre><code>`summarise()` has grouped output by &#39;IRIS&#39;. You can override using the
`.groups` argument.</code></pre>
<pre><code># A tibble: 193 x 14
   IRIS      age_2 age_5 age_10 age_14 age_17 age_19 age_24 age_29 age_39 age_54
   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 751114101    95    81    131    127    108     77    215    356    502    577
 2 751114102    60    34     42     39     39     38    205    407    531    429
 3 751114103    54    33     80     59     43     63    123    301    354    315
 4 751114104    54    23     72     40     21     23    146    277    323    288
 5 751114105    60    77     54     45     36     24    128    274    377    375
 6 751114106    71    96    115     58     62     61    151    362    480    595
 7 751114107    74    50     73     57     34     43    167    519    550    483
 8 751114108    75    72     75     75     76     38    147    290    456    535
 9 751114109    61    55     89     67     64     93    348    428    562    535
10 751114110    56    30     69     52     36     30    120    275    332    334
# ... with 183 more rows, and 3 more variables: age_64 &lt;dbl&gt;, age_79 &lt;dbl&gt;,
#   age_80 &lt;dbl&gt;</code></pre>
<p>La fonction s’écrira alors de cette façon :</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="13-Base-individus-RP.html#cb155-1" aria-hidden="true" tabindex="-1"></a>tab_cont_n_iris <span class="ot">&lt;-</span> <span class="cf">function</span>(data, codedept, codecom, ..., nom_var, var, prefix_var)</span>
<span id="cb155-2"><a href="13-Base-individus-RP.html#cb155-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb155-3"><a href="13-Base-individus-RP.html#cb155-3" aria-hidden="true" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> <span class="fu">sum_var_IRIS</span>(<span class="at">data =</span> data, <span class="at">codedept =</span> codedept, <span class="at">codecom =</span> codecom, ..., <span class="at">nom_var =</span> nom_var)</span>
<span id="cb155-4"><a href="13-Base-individus-RP.html#cb155-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb155-5"><a href="13-Base-individus-RP.html#cb155-5" aria-hidden="true" tabindex="-1"></a>  tab_n <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> {{ var }}, <span class="at">values_from =</span> nom_var,</span>
<span id="cb155-6"><a href="13-Base-individus-RP.html#cb155-6" aria-hidden="true" tabindex="-1"></a>                               <span class="at">values_fill =</span> <span class="dv">0</span>, <span class="at">names_prefix =</span> prefix_var)</span>
<span id="cb155-7"><a href="13-Base-individus-RP.html#cb155-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb155-8"><a href="13-Base-individus-RP.html#cb155-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tab_n)</span>
<span id="cb155-9"><a href="13-Base-individus-RP.html#cb155-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Pour la variable d’âge, cela donnera :</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="13-Base-individus-RP.html#cb156-1" aria-hidden="true" tabindex="-1"></a>Nbage <span class="ot">&lt;-</span> <span class="fu">tab_cont_n_iris</span>(RP, <span class="at">codedept =</span> <span class="st">&quot; &quot;</span>, <span class="at">codecom =</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), IRIS, AGER20, <span class="at">nom_var =</span> Nb_age,</span>
<span id="cb156-2"><a href="13-Base-individus-RP.html#cb156-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">var =</span> AGER20, <span class="at">prefix_var =</span> <span class="st">&quot;age_&quot;</span>)</span></code></pre></div>
<pre><code>`summarise()` has grouped output by &#39;IRIS&#39;. You can override using the
`.groups` argument.</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="13-Base-individus-RP.html#cb158-1" aria-hidden="true" tabindex="-1"></a>Nbage</span></code></pre></div>
<pre><code># A tibble: 193 x 14
   IRIS      age_2 age_5 age_10 age_14 age_17 age_19 age_24 age_29 age_39 age_54
   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 751114101    95    81    131    127    108     77    215    356    502    577
 2 751114102    60    34     42     39     39     38    205    407    531    429
 3 751114103    54    33     80     59     43     63    123    301    354    315
 4 751114104    54    23     72     40     21     23    146    277    323    288
 5 751114105    60    77     54     45     36     24    128    274    377    375
 6 751114106    71    96    115     58     62     61    151    362    480    595
 7 751114107    74    50     73     57     34     43    167    519    550    483
 8 751114108    75    72     75     75     76     38    147    290    456    535
 9 751114109    61    55     89     67     64     93    348    428    562    535
10 751114110    56    30     69     52     36     30    120    275    332    334
# ... with 183 more rows, and 3 more variables: age_64 &lt;dbl&gt;, age_79 &lt;dbl&gt;,
#   age_80 &lt;dbl&gt;</code></pre>
<p>On se retrouve ainsi avec un tableau avec 193 lignes et 14 colonnes car la variable <code>AGER20</code> a 13 modalités ; c’est un peu trop, il faudra donc regrouper des modalités pour éviter d’avoir des catégories avec des effectifs trop faibles et parce que nous n’avons pas besoin d’un niveau de détail si élevé.</p>
<p>Avant de sélectionner les variables à partir desquelles on réalisera le clustering, revenons théoriquement sur les objectifs et la démarche de cette méthode d’analyse de données.</p>

</div>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="12-Retour-sur-Shiny.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="14-Clustering-theorique.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/github.io-Data-Mining/master/13-Base-individus-RP.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
