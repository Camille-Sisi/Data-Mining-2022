<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 11 Le package Ggplot en pratiques | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 11 Le package Ggplot en pratiques | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 11 Le package Ggplot en pratiques | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />


<meta name="date" content="2023-02-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="10-Ggplot-theorique.html"/>
<link rel="next" href="12-Retour-sur-Shiny.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Jeu-de-donnees.html"><a href="01-Jeu-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération du jeu de données sur une API</a></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#séparer-les-variables-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Séparer les variables, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Enregistrement-tables-donnees.html"><a href="04-Enregistrement-tables-donnees.html"><i class="fa fa-check"></i><b>4</b> Enregistrement des tables</a></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-cohorte-des-bacheliers-2014-inscrits-en-première-année-de-licence-en-2014-2015"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-Fonctions.html"><a href="06-Fonctions.html"><i class="fa fa-check"></i><b>6</b> Systématiser nos procédures : construire une fonction</a></li>
<li class="chapter" data-level="7" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html"><i class="fa fa-check"></i><b>7</b> (reprise de l’)Analyse descriptive</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html#caractéristiques-de-la-cohorte-des-bacheliers-2014-inscrits-en-première-année-de-licence-en-2014-2015-1"><i class="fa fa-check"></i><b>7.1</b> Caractéristiques de la cohorte des bacheliers 2014 inscrits en première année de licence en 2014-2015</a></li>
<li class="chapter" data-level="7.2" data-path="07-Analyse-descriptive.html"><a href="07-Analyse-descriptive.html#profils-des-étudiants-selon-leur-situation-en-fin-de-l1"><i class="fa fa-check"></i><b>7.2</b> Profils des étudiants selon leur situation en fin de L1</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Introduction à ShinyApp</b></span></li>
<li class="chapter" data-level="8" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html"><i class="fa fa-check"></i><b>8</b> Les applications interactives avec Shiny App</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-structure-générale-dune-application-shiny"><i class="fa fa-check"></i><b>8.1</b> La structure générale d’une application Shiny</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-partie-ui"><i class="fa fa-check"></i><b>8.1.1</b> La partie “UI”</a></li>
<li class="chapter" data-level="8.1.2" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-partie-server"><i class="fa fa-check"></i><b>8.1.2</b> La partie “Server”</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#la-réactivité"><i class="fa fa-check"></i><b>8.2</b> La réactivité</a></li>
<li class="chapter" data-level="8.3" data-path="08-Intro-a-Shiny-theorique.html"><a href="08-Intro-a-Shiny-theorique.html#un-exemple-avec-le-code-du-script-par-défaut"><i class="fa fa-check"></i><b>8.3</b> Un exemple avec le code du script par défaut</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html"><i class="fa fa-check"></i><b>9</b> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#application-vide"><i class="fa fa-check"></i><b>9.1</b> Application vide</a></li>
<li class="chapter" data-level="9.2" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget"><i class="fa fa-check"></i><b>9.2</b> Ajout d’un titre et d’un widget</a></li>
<li class="chapter" data-level="9.3" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#ajout-dun-graphique"><i class="fa fa-check"></i><b>9.3</b> Ajout d’un graphique</a></li>
<li class="chapter" data-level="9.4" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable"><i class="fa fa-check"></i><b>9.4</b> Modification du graphique : filtrer selon une variable</a></li>
<li class="chapter" data-level="9.5" data-path="09-Intro-a-Shiny-exemples.html"><a href="09-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux"><i class="fa fa-check"></i><b>9.5</b> Modification du graphique : selon une variable au choix parmi deux</a></li>
</ul></li>
<li class="part"><span><b>Séances 4 et 5 : Data Visualization</b></span></li>
<li class="chapter" data-level="10" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html"><i class="fa fa-check"></i><b>10</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>10.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>10.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>10.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>10.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>10.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="10.1.5" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>10.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="10.1.6" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>10.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="10.1.7" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>10.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="10.1.8" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>10.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="10.1.9" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>10.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="10-Ggplot-theorique.html"><a href="10-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>10.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html"><i class="fa fa-check"></i><b>11</b> Le package Ggplot en pratiques</a>
<ul>
<li class="chapter" data-level="11.1" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>11.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="11.2" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>11.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#distribution-du-montant-total-des-aides-financières-par-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.1</b> Distribution du montant total des aides financières, par secteur d’activité</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-des-aides-financières-par-région"><i class="fa fa-check"></i><b>11.2.2</b> Comparaison des montants moyen et médian des aides financières, par région</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#lien-entre-le-montant-moyen-des-aides-versées-et-le-nombre-moyen-dentreprises-bénéficiaires-par-secteur-dactivité-puis-par-région"><i class="fa fa-check"></i><b>11.2.3</b> Lien entre le montant moyen des aides versées et le nombre moyen d’entreprises bénéficiaires, par secteur d’activité puis par région</a></li>
<li class="chapter" data-level="11.2.4" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#montant-moyen-des-aides-versées-par-entreprise-dans-chaque-région-ou-chaque-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.4</b> Montant moyen des aides versées par entreprise dans chaque région ou chaque secteur d’activité</a></li>
<li class="chapter" data-level="11.2.5" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#top-5-des-aides-financières-versées-selon-la-région-ou-le-secteur-dactivité"><i class="fa fa-check"></i><b>11.2.5</b> Top 5 des aides financières versées selon la région ou le secteur d’activité</a></li>
<li class="chapter" data-level="11.2.6" data-path="11-Ggplot-pratique.html"><a href="11-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>11.2.6</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html"><i class="fa fa-check"></i><b>12</b> Application sur Shiny</a>
<ul>
<li class="chapter" data-level="12.1" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#application-avec-un-tableau-et-un-graphique"><i class="fa fa-check"></i><b>12.1</b> Application avec un tableau et un graphique</a></li>
<li class="chapter" data-level="12.2" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-appliquée-à-la-table-de-données"><i class="fa fa-check"></i><b>12.2</b> Introduction d’une réactivité appliquée à la table de données</a></li>
<li class="chapter" data-level="12.3" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-sans-changer-les-outputs-contexte-réactif"><i class="fa fa-check"></i><b>12.3</b> Introduction d’une réactivité sur les inputs sans changer les outputs (contexte réactif)</a></li>
<li class="chapter" data-level="12.4" data-path="12-Retour-sur-Shiny.html"><a href="12-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-et-les-outputs"><i class="fa fa-check"></i><b>12.4</b> Introduction d’une réactivité sur les inputs ET les outputs</a></li>
</ul></li>
<li class="part"><span><b>Séances 6 et 7 : Clustering</b></span></li>
<li class="chapter" data-level="13" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html"><i class="fa fa-check"></i><b>13</b> Nouvelle base de données individuelles à prendre en main : le RP 2018</a>
<ul>
<li class="chapter" data-level="13.1" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>13.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="13.2" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#prise-en-main-rapide"><i class="fa fa-check"></i><b>13.2</b> Prise en main rapide</a></li>
<li class="chapter" data-level="13.3" data-path="13-Base-individus-RP.html"><a href="13-Base-individus-RP.html#tableaux-de-contingence-par-iris-découpage-territorial-infracommunal"><i class="fa fa-check"></i><b>13.3</b> Tableaux de contingence par IRIS (découpage territorial infracommunal)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html"><i class="fa fa-check"></i><b>14</b> Clustering : aspects théoriques</a>
<ul>
<li class="chapter" data-level="14.1" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html#la-classification-ascendante-hiérarchique-cah"><i class="fa fa-check"></i><b>14.1</b> La classification ascendante hiérarchique (CAH)</a></li>
<li class="chapter" data-level="14.2" data-path="14-Clustering-theorique.html"><a href="14-Clustering-theorique.html#la-méthode-des-centres-mobiles-et-sa-variante-les-k-means"><i class="fa fa-check"></i><b>14.2</b> La méthode des centres mobiles et sa variante, <em>les K-means</em></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html"><i class="fa fa-check"></i><b>15</b> Clustering : application sur le RP 2018</a>
<ul>
<li class="chapter" data-level="15.1" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#choix-des-variables-et-préparation-du-tableau-final"><i class="fa fa-check"></i><b>15.1</b> Choix des variables et préparation du tableau final</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#variables-socio-professionnelles-caractérisant-les-individushabitants-de-notre-commune"><i class="fa fa-check"></i><b>15.1.1</b> Variables socio-professionnelles caractérisant les individus/habitants de notre commune</a></li>
<li class="chapter" data-level="15.1.2" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#création-des-différents-tableaux-de-contingence"><i class="fa fa-check"></i><b>15.1.2</b> Création des différents tableaux de contingence</a></li>
<li class="chapter" data-level="15.1.3" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#création-du-tableau-final"><i class="fa fa-check"></i><b>15.1.3</b> Création du tableau final</a></li>
<li class="chapter" data-level="15.1.4" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#choix-des-variables-actives-dans-le-clustering"><i class="fa fa-check"></i><b>15.1.4</b> choix des variables actives dans le clustering</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#la-méthode-de-la-cah-appliquée-à-nos-données"><i class="fa fa-check"></i><b>15.2</b> La méthode de la CAH appliquée à nos données</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#constitution-des-classes"><i class="fa fa-check"></i><b>15.2.1</b> Constitution des classes</a></li>
<li class="chapter" data-level="15.2.2" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#visualisation-sur-la-carte-de-la-commune"><i class="fa fa-check"></i><b>15.2.2</b> Visualisation sur la carte de la commune</a></li>
<li class="chapter" data-level="15.2.3" data-path="15-Clustering-application.html"><a href="15-Clustering-application.html#interprétation"><i class="fa fa-check"></i><b>15.2.3</b> Interprétation</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c11-Ggplot-pratique" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Section 11</span> Le package Ggplot en pratiques<a href="11-Ggplot-pratique.html#c11-Ggplot-pratique" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">

<p>Reprenons la base de données sur les aides financières versées aux entreprises pendant la crise du Covid enregistrée précédemment (mais on peut aussi la télécharger de nouveau <em>via</em> l’API pour avoir la version la plus récente si elle est actualisée), et regardons de nouveau les variables présentes dans cette base (les 2 dernières variables étant des variables créées précédemment, cf. section 3.2.3. de la séance 1 de ce cours) :</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="11-Ggplot-pratique.html#cb102-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dt_aidesCovid.RData&quot;</span>)</span>
<span id="cb102-2"><a href="11-Ggplot-pratique.html#cb102-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb102-3"><a href="11-Ggplot-pratique.html#cb102-3" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 1,680
Columns: 15
$ reg_code                &lt;int&gt; 84, 84, 84, 84, 84, 84, 27, 27, 27, 53, 53, 24~
$ geo_point_2d            &lt;list&gt; &lt;45.263906, 5.573978&gt;, &lt;45.728000, 4.164813&gt;,~
$ naf_section_name        &lt;chr&gt; &quot;Arts, spectacles et activités récréatives&quot;, &quot;~
$ nombre_entreprises      &lt;int&gt; 1980, 3034, 2188, 6577, 3350, 6772, 61, 45, 23~
$ plan                    &lt;chr&gt; &quot;Fonds de solidarité&quot;, &quot;Fonds de solidarité&quot;, ~
$ financial_support_count &lt;int&gt; 15958, 8936, 21447, 19967, 18693, 16910, 366, ~
$ reg_name                &lt;chr&gt; &quot;Auvergne-Rhône-Alpes&quot;, &quot;Auvergne-Rhône-Alpes&quot;~
$ naf_section_code        &lt;chr&gt; &quot;R&quot;, &quot;F&quot;, &quot;I&quot;, &quot;F&quot;, &quot;N&quot;, &quot;Q&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;~
$ total_meuros            &lt;dbl&gt; 53.696626, 13.922570, 111.923817, 33.039981, 8~
$ dep_name                &lt;chr&gt; &quot;Isère&quot;, &quot;Loire&quot;, &quot;Loire&quot;, &quot;Rhône&quot;, &quot;Rhône&quot;, &quot;~
$ iso3_code               &lt;chr&gt; &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX&quot;, &quot;FXX~
$ dep_code                &lt;chr&gt; &quot;38&quot;, &quot;42&quot;, &quot;42&quot;, &quot;69&quot;, &quot;69&quot;, &quot;69&quot;, &quot;58&quot;, &quot;89&quot;~
$ total                   &lt;dbl&gt; 53696626, 13922570, 111923817, 33039981, 83094~
$ total_meuros_outliers   &lt;chr&gt; &quot;Vrai&quot;, &quot;Faux&quot;, &quot;Vrai&quot;, &quot;Faux&quot;, &quot;Vrai&quot;, &quot;Faux&quot;~
$ total_meuros_cat        &lt;fct&gt; &quot;(21.1,1.64e+03]&quot;, &quot;(1.83,21.1]&quot;, &quot;(21.1,1.64e~</code></pre>
<p>Passons en variables ‘factor’ les variables caractères, car sinon au moment de la construction des graphiques avec <code>ggplot2</code> la fonction ne reconnaîtra pas les modalités de la variable qualitative utilisée (sauf à appliquer la fonction <code>factor()</code> à la variable directement dans l’<code>aes</code> de <code>ggplot()</code>).</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="11-Ggplot-pratique.html#cb104-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character, as.factor)</span>
<span id="cb104-2"><a href="11-Ggplot-pratique.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dt_aidesCovid %&gt;% select_if(is.factor) %&gt;% sapply(levels)</span></span></code></pre></div>
<div id="exemple-de-la-construction-dun-graphique-pas-à-pas" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Exemple de la construction d’un graphique pas à pas<a href="11-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On va chercher à représenter la distribution du montant en millions d’euros des aides financières versées aux entreprises selon les régions. Notre variable principale est donc <code>total_meuros</code> et la variable “secondaire” ou fonction de la première est <code>reg_name</code> ou <code>reg_code</code>.<br />
Pour représenter la distribution d’une variable quantitative ou continue, on peut utiliser un histogramme (ou/et une courbe de densité), mais comme ici on veut la représenter selon une autre variable peut-être serait-il mieux d’utiliser une boîte à moustache qui donnera les principaux éléments de description de la distribution de cette variable.</p>
<p><strong>ATTENTION néanmoins</strong>, vu la façon dont la base de données est construite, que l’on montre par ce graphique ce n’est pas la distribution de la variable selon ce qu’a reçue chaque entreprise dans la région, mais selon ce qu’a reçu chaque département et chaque secteur d’activité dans la région ; les données ne sont en effet pas individuelles mais agrégées par département et secteur, la distribution affichée sera donc sensible au nombre (inégal) de départements dans chaque région. Nous raisonnerons ensuite de manière plus pertinente sur des indicateurs construits.</p>
<p>Essayons !<br />
<strong>D’abord</strong>, en créant une <strong>boîte à moustache pour représenter la distribution de la variable <code>total_meuros</code></strong>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="11-Ggplot-pratique.html#cb105-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> total_meuros) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-79-1.svg" width="672" /></p>
<p>Comme il y a des valeurs aberrantes (cf. section 3.2.3. de la séance 1 de ce cours), il faut <strong>utiliser une option pour mettre une échelle moins grande en abcisses</strong>. Plusieurs manières de faire existent, mais l’une d’entre elles équivaut à supprimer les valeurs, alors qu’une autre permet de les garder et juste de ne pas les faire apparaître sur le graphique, cela peut-être important si ensuite nous voulons ajoutons des statistiques comme la moyenne sur le boxplot.<br />
Pour changer l’échelle des abcisses, on utilise <code>scale_x_continuous()</code> et l’option <code>limits=c()</code> pour indiquer les nouvelles valeurs de l’échelle, par exemple ici entre 0 et 100 (pour rappel, on est en millions d’euros) :</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="11-Ggplot-pratique.html#cb106-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> total_meuros) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb106-2"><a href="11-Ggplot-pratique.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))</span></code></pre></div>
<pre><code>Warning: Removed 70 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-80-1.svg" width="672" /></p>
<p>Un avertissement est donné : 70 lignes ont donc été supprimées (sur 1 680 initiales), si nous ajoutons ensuite la moyenne, elle sera calculée sans ces 70 observations, cela ne changera peut-être pas significativement ici cette moyenne mais cela n’est pas très rigoureux.</p>
<p>Utilisons la seconde méthode maintenant, avec l’option <code>xlim()</code> à intégrer dans la fonction <code>coord_cartesian()</code> qui fait l’équivalent d’un zoom sur le graphique :</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="11-Ggplot-pratique.html#cb108-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> total_meuros) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb108-2"><a href="11-Ggplot-pratique.html#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-81-1.svg" width="672" />
Plus de “warning” !</p>
<p><strong>Ensuite</strong>, nous souhaitons <strong>représenter la distribution de cette variable selon les régions</strong> : nous allons pour cela ajouter dans l’<code>aes()</code> une variable <code>y=</code> ; et nous allons en profiter pour préciser un peu l’échelle des abscisses (réduire le “pas” avec l’option <code>breaks=seq()</code>) :</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="11-Ggplot-pratique.html#cb109-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span>reg_name) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb109-2"><a href="11-Ggplot-pratique.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>)) <span class="sc">+</span> </span>
<span id="cb109-3"><a href="11-Ggplot-pratique.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-82-1.svg" width="672" />
On voit que pour la région Île-de-France, le maximum n’est pas visible sur l’axe, il faut augmenter un peu l’échelle dans ce cas.</p>
<p>Nous pouvons <strong>également ajouter la moyenne</strong>, puisqu’ici nous voyons de gauche à droite, le minimum, le 1er quartile, la médiane, le 3ème quartile, le maximum et les “outliers” (points aberrants selon les statistiques de la boxplot). Pour cela, il faut utiliser la “couche” statistiques de <code>ggplot()</code> avec la fonction <code>stat_summary()</code> et les options <code>fun = mean</code> pour la moyenne, <code>geom = point</code> pour qu’elle soit représentée par un point, <code>color="gray50"</code> pour qu’elle se différencie des autres points et soit en gris, et éventuellement <code>size=2</code> pour jouer sur la taille du point :</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="11-Ggplot-pratique.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour infos, les options de `geom =` dans `stat_summary()` sont par exemple :  </span></span>
<span id="cb110-2"><a href="11-Ggplot-pratique.html#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;point&quot;, &quot;pointrange&quot;, &quot;crossbar&quot;, &quot;bar&quot; (cell-ci à ne pas utiliser ici néanmoins !)</span></span>
<span id="cb110-3"><a href="11-Ggplot-pratique.html#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="11-Ggplot-pratique.html#cb110-4" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span>reg_name) <span class="sc">+</span> </span>
<span id="cb110-5"><a href="11-Ggplot-pratique.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb110-6"><a href="11-Ggplot-pratique.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb110-7"><a href="11-Ggplot-pratique.html#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">160</span>)) <span class="sc">+</span> </span>
<span id="cb110-8"><a href="11-Ggplot-pratique.html#cb110-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">160</span>,<span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-83-1.svg" width="672" /></p>
<p>On peut aussi vouloir enlever les outliers avec l’option <code>outlier.shape</code> de <code>geom_boxplot()</code> comme ceci : <code>geom_boxplot(outlier.shape = NA)</code>.</p>
<p>On peut vouloir encore <strong>ordonner l’affichage des régions par ordre décroissant de la médiane</strong> ou de <strong>la moyenne</strong> (ordre décroissant ici = valeur la plus élevée en haut du graphique). Nous pouvons, entre autres, utiliser pour cela la fonction <code>fct_reorder()</code> du package <strong><code>forcats</code></strong> déjà présenté dans la section 3.2 de ce cours (Séance 1) : nous pouvons alors directement l’intégrer dans l’<code>aes</code> de <strong>ggplot</strong> dans la variable en ordonnée <code>y=fct_reorder()</code>, il faut alors entre parenthèses mettre la variable utilisée en ordonnée, suivie de la variable par laquelle on ordonne (la même que celle utilisée dans <code>x=</code>). Utilisée dans un boxplot, cela ordonne par défaut selon la médiane ; si on veut que les régions soient ordonnées par la moyenne, il faut rajouter l’option <code>.fun=mean</code> dans la fonction <code>fct_reorder()</code>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="11-Ggplot-pratique.html#cb111-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb111-2"><a href="11-Ggplot-pratique.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, total_meuros)) <span class="sc">+</span> </span>
<span id="cb111-3"><a href="11-Ggplot-pratique.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb111-4"><a href="11-Ggplot-pratique.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb111-5"><a href="11-Ggplot-pratique.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">160</span>)) <span class="sc">+</span> </span>
<span id="cb111-6"><a href="11-Ggplot-pratique.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">160</span>,<span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-84-1.svg" width="672" /></p>
<p>Ordonnée par la moyenne, cela donnerait ceci :</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="11-Ggplot-pratique.html#cb112-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb112-2"><a href="11-Ggplot-pratique.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, total_meuros, <span class="at">.fun=</span>mean)) <span class="sc">+</span> </span>
<span id="cb112-3"><a href="11-Ggplot-pratique.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb112-4"><a href="11-Ggplot-pratique.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb112-5"><a href="11-Ggplot-pratique.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">160</span>)) <span class="sc">+</span> </span>
<span id="cb112-6"><a href="11-Ggplot-pratique.html#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">160</span>,<span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-85-1.svg" width="672" /></p>
<p>Nous arrivons à un graphique intéressant, il faut <strong>maintenant améliorer la description autour</strong> : noms des axes, titres, légende informative sous le graphique (avec notamment avertissement sur les valeurs non affichées sur le graphique), éventuellement un peu de couleur (avec <code>fill=</code> dans l’<code>aes()</code> pour que les couleurs soient différentes selon les régions mais en supprimant la légende affichée automatiquement qui n’apporte pourtant pas d’information ici, puisque les noms des régions sont affichées sur l’axe des y), etc.<br />
Cela se fait avec la fonction <code>labs()</code>, et ensuite la fonction <code>theme()</code>.<br />
Une petite astuce pour les titres pour qu’ils ne soient pas coupés sur le graphe : <code>\n</code> collé à un mot (sans espace) permet de mettre à la ligne à partir de ce mot !</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="11-Ggplot-pratique.html#cb113-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb113-2"><a href="11-Ggplot-pratique.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, total_meuros, <span class="at">.fun=</span>mean), </span>
<span id="cb113-3"><a href="11-Ggplot-pratique.html#cb113-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>reg_name) <span class="sc">+</span> </span>
<span id="cb113-4"><a href="11-Ggplot-pratique.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb113-5"><a href="11-Ggplot-pratique.html#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb113-6"><a href="11-Ggplot-pratique.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">160</span>)) <span class="sc">+</span> </span>
<span id="cb113-7"><a href="11-Ggplot-pratique.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">160</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb113-8"><a href="11-Ggplot-pratique.html#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du montant total des aides financières versées aux </span><span class="sc">\n</span><span class="st">entreprises par le fonds de solidarité pendant la crise du Covid19, </span><span class="sc">\n</span><span class="st">par région&quot;</span>, </span>
<span id="cb113-9"><a href="11-Ggplot-pratique.html#cb113-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Montant total des aides (en millions d&#39;euros)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Région&quot;</span>,</span>
<span id="cb113-10"><a href="11-Ggplot-pratique.html#cb113-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs au-delà de 160 millions d&#39;euros ne sont pas affichées ; les points en </span><span class="sc">\n</span><span class="st">gris représentent la moyenne pour chaque région. </span><span class="sc">\n</span><span class="st">Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; </span><span class="sc">\n</span><span class="st">via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb113-11"><a href="11-Ggplot-pratique.html#cb113-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, </span>
<span id="cb113-12"><a href="11-Ggplot-pratique.html#cb113-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb113-13"><a href="11-Ggplot-pratique.html#cb113-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb113-14"><a href="11-Ggplot-pratique.html#cb113-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb113-15"><a href="11-Ggplot-pratique.html#cb113-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-86-1.svg" width="672" /></p>
<p>Allons plus loin et testons d’autres types de graphiques.<br />
Peut-être, <strong>peut-on utiliser un graphe en violon à la place du boxplot</strong> ?</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="11-Ggplot-pratique.html#cb114-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb114-2"><a href="11-Ggplot-pratique.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, <span class="fu">desc</span>(total_meuros), <span class="at">.fun=</span>mean),</span>
<span id="cb114-3"><a href="11-Ggplot-pratique.html#cb114-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>reg_name) <span class="sc">+</span> </span>
<span id="cb114-4"><a href="11-Ggplot-pratique.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span> </span>
<span id="cb114-5"><a href="11-Ggplot-pratique.html#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb114-6"><a href="11-Ggplot-pratique.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">75</span>)) <span class="sc">+</span> </span>
<span id="cb114-7"><a href="11-Ggplot-pratique.html#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du montant total des aides financières versées aux entreprises par le fonds </span><span class="sc">\n</span><span class="st">de solidarité pendant la crise du Covid19, par région&quot;</span>, </span>
<span id="cb114-8"><a href="11-Ggplot-pratique.html#cb114-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Montant total des aides (en millions d&#39;euros)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Région&quot;</span>,</span>
<span id="cb114-9"><a href="11-Ggplot-pratique.html#cb114-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs au-delà de 75 millions d&#39;euros ne sont pas affichées ; les points en gris représentent la moyenne </span><span class="sc">\n</span><span class="st">pour chaque région. </span><span class="sc">\n</span><span class="st">Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb114-10"><a href="11-Ggplot-pratique.html#cb114-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, </span>
<span id="cb114-11"><a href="11-Ggplot-pratique.html#cb114-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb114-12"><a href="11-Ggplot-pratique.html#cb114-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>),</span>
<span id="cb114-13"><a href="11-Ggplot-pratique.html#cb114-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb114-14"><a href="11-Ggplot-pratique.html#cb114-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb114-15"><a href="11-Ggplot-pratique.html#cb114-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-87-1.svg" width="672" /></p>
<p>Non, le rendu n’est pas terrible car les distributions pour certaines régions sont très étirées, à éviter donc ici !</p>
<p>Mais peut-être <strong>peut-on rajouter les observations pour voir complètement la distribution avec <code>geom_jitter()</code></strong> appelé après <code>geom_boxplot()</code> et en enlevant les “outliers” dans ce cas ?</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="11-Ggplot-pratique.html#cb115-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb115-2"><a href="11-Ggplot-pratique.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, total_meuros, <span class="at">.fun=</span>mean), <span class="at">fill=</span>reg_name) <span class="sc">+</span> </span>
<span id="cb115-3"><a href="11-Ggplot-pratique.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb115-4"><a href="11-Ggplot-pratique.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb115-5"><a href="11-Ggplot-pratique.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb115-6"><a href="11-Ggplot-pratique.html#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">160</span>)) <span class="sc">+</span> </span>
<span id="cb115-7"><a href="11-Ggplot-pratique.html#cb115-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du montant total des aides financières versées aux </span><span class="sc">\n</span><span class="st">entreprises par le fonds de solidarité pendant la crise du Covid19, </span><span class="sc">\n</span><span class="st">par région&quot;</span>, </span>
<span id="cb115-8"><a href="11-Ggplot-pratique.html#cb115-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Montant total des aides (en millions d&#39;euros)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Région&quot;</span>,</span>
<span id="cb115-9"><a href="11-Ggplot-pratique.html#cb115-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs au-delà de 160 millions d&#39;euros ne sont pas affichées ; les points en </span><span class="sc">\n</span><span class="st">gris représentent la moyenne pour chaque région. </span><span class="sc">\n</span><span class="st">Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; </span><span class="sc">\n</span><span class="st">via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb115-10"><a href="11-Ggplot-pratique.html#cb115-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, </span>
<span id="cb115-11"><a href="11-Ggplot-pratique.html#cb115-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb115-12"><a href="11-Ggplot-pratique.html#cb115-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb115-13"><a href="11-Ggplot-pratique.html#cb115-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb115-14"><a href="11-Ggplot-pratique.html#cb115-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-88-1.svg" width="672" /></p>
<p>Non, pas terrible non plus, on ne voit plus grand chose !!</p>
<p><strong>Finalement</strong>, on peut garder le <strong>graphique que l’on avait en enlevant les “outliers”</strong> pour le rendre plus clair :</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="11-Ggplot-pratique.html#cb116-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb116-2"><a href="11-Ggplot-pratique.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, total_meuros, <span class="at">.fun=</span>mean), <span class="at">fill=</span>reg_name) <span class="sc">+</span> </span>
<span id="cb116-3"><a href="11-Ggplot-pratique.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb116-4"><a href="11-Ggplot-pratique.html#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb116-5"><a href="11-Ggplot-pratique.html#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">160</span>)) <span class="sc">+</span> </span>
<span id="cb116-6"><a href="11-Ggplot-pratique.html#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du montant total des aides financières versées aux </span><span class="sc">\n</span><span class="st">entreprises par le fonds de solidarité pendant la crise du Covid19, </span><span class="sc">\n</span><span class="st">par région&quot;</span>, </span>
<span id="cb116-7"><a href="11-Ggplot-pratique.html#cb116-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Montant total des aides (en millions d&#39;euros)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Région&quot;</span>,</span>
<span id="cb116-8"><a href="11-Ggplot-pratique.html#cb116-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs au-delà de 160 millions d&#39;euros ne sont pas affichées ; les points en </span><span class="sc">\n</span><span class="st">gris représentent la moyenne pour chaque région. </span><span class="sc">\n</span><span class="st">Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; </span><span class="sc">\n</span><span class="st">via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb116-9"><a href="11-Ggplot-pratique.html#cb116-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, </span>
<span id="cb116-10"><a href="11-Ggplot-pratique.html#cb116-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb116-11"><a href="11-Ggplot-pratique.html#cb116-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb116-12"><a href="11-Ggplot-pratique.html#cb116-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb116-13"><a href="11-Ggplot-pratique.html#cb116-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-89-1.svg" width="672" /></p>
<p>Voilà un premier graphique construit avec la grammaire de <code>ggplot()</code>.<br />
À vous maintenant de construire vous-mêmes les graphiques qui vous sont suggérés dans la section suivante !</p>
</div>
<div id="dautres-exemples-à-travers-des-exercices" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> D’autres exemples à travers des exercices<a href="11-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="distribution-du-montant-total-des-aides-financières-par-secteur-dactivité" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> Distribution du montant total des aides financières, par secteur d’activité<a href="11-Ggplot-pratique.html#distribution-du-montant-total-des-aides-financières-par-secteur-dactivité" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Construisez le même type de graphique mais cette fois par secteur d’activité et non par région. N’hésitez pas à changer les options pour le mettre à votre goût !!</p>
<img src="Data-Mining_files/figure-html/unnamed-chunk-90-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="11-Ggplot-pratique.html#cb117-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb117-2"><a href="11-Ggplot-pratique.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> total_meuros, </span>
<span id="cb117-3"><a href="11-Ggplot-pratique.html#cb117-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">y=</span><span class="fu">fct_reorder</span>(naf_section_code, total_meuros, <span class="at">.fun=</span>mean), </span>
<span id="cb117-4"><a href="11-Ggplot-pratique.html#cb117-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>naf_section_code) <span class="sc">+</span> </span>
<span id="cb117-5"><a href="11-Ggplot-pratique.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb117-6"><a href="11-Ggplot-pratique.html#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray45&quot;</span>, <span class="at">size=</span><span class="fl">2.2</span>) <span class="sc">+</span> </span>
<span id="cb117-7"><a href="11-Ggplot-pratique.html#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">300</span>)) <span class="sc">+</span> </span>
<span id="cb117-8"><a href="11-Ggplot-pratique.html#cb117-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">300</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb117-9"><a href="11-Ggplot-pratique.html#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du montant total des aides financières versées aux entreprises par le </span><span class="sc">\n</span><span class="st">fonds de solidarité pendant la crise du Covid19, par secteur d&#39;activité&quot;</span>, </span>
<span id="cb117-10"><a href="11-Ggplot-pratique.html#cb117-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Montant total des aides (en millions d&#39;euros)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Secteur d&#39;activité&quot;</span>,</span>
<span id="cb117-11"><a href="11-Ggplot-pratique.html#cb117-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs au-delà de 160 millions d&#39;euros ne sont pas affichées ; les points en gris représentent la </span><span class="sc">\n</span><span class="st">moyenne pour chaque secteur </span><span class="sc">\n</span><span class="st">Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb117-12"><a href="11-Ggplot-pratique.html#cb117-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, </span>
<span id="cb117-13"><a href="11-Ggplot-pratique.html#cb117-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb117-14"><a href="11-Ggplot-pratique.html#cb117-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">12.5</span>),</span>
<span id="cb117-15"><a href="11-Ggplot-pratique.html#cb117-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb117-16"><a href="11-Ggplot-pratique.html#cb117-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
</div>
</div>
<div id="comparaison-des-montants-moyen-et-médian-des-aides-financières-par-région" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Comparaison des montants moyen et médian des aides financières, par région<a href="11-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-des-aides-financières-par-région" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nous entamons maintenant des graphiques qui auront un sens plus pertinent par rapport à la base mobilisée (et à la façon dont elle est construite), le résultat pourra ainsi être interprété.</p>
<p>Construisez d’abord un graphique mettant côte à côte deux graphes en bâtons représentant respectivement le montant moyen et le montant médian des aides financières versées aux entreprises par le fonds de solidarité pendant la crise du Covid19 par <em>région</em>.</p>
<p>Pour vous aider si besoin, réfléchissez par étapes :</p>
<ul>
<li>créer un premier graphe que vous assignerez à un nouvel objet et qui représentera la moyenne par région ;</li>
<li>vous pouvez pour cela créer une nouvelle variable qui constituera la moyenne pour chaque région (un conseil : arrondir à l’unité) ;</li>
<li>sélectionner les variables qui seront utilisées dans le graphique et vérifier (ou corriger sinon) qu’il n’y ait pas des doublons (lignes identiques) car cela peut fausser le graphique ensuite ;</li>
<li>construisez le graphique avec <code>ggplot()</code> et la bonne fonction <code>geom_***()</code>, les données seront affichées par ordre décroissant ;</li>
<li>faîtes de même pour la médiane par région ;</li>
<li>vous pouvez ensuite mettre ces graphiques côte à côté avec le package <strong><code>patchwork</code></strong> (qu’il vous faudra probablement installer si c’est la première fois que vous l’utilisez), recherchez comment faire ensuite (c’est très simple !), puis ajouter un titre et une légende général avec la fonction <code>plot_annotation()</code>.</li>
</ul>
<img src="Data-Mining_files/figure-html/unnamed-chunk-92-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="11-Ggplot-pratique.html#cb118-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="11-Ggplot-pratique.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_total_meuros =</span> <span class="fu">round</span>(<span class="fu">mean</span>(total_meuros),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="11-Ggplot-pratique.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(moy_total_meuros, reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="11-Ggplot-pratique.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb118-5"><a href="11-Ggplot-pratique.html#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(reg_name, <span class="fu">desc</span>(moy_total_meuros)), </span>
<span id="cb118-6"><a href="11-Ggplot-pratique.html#cb118-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> moy_total_meuros) <span class="sc">+</span></span>
<span id="cb118-7"><a href="11-Ggplot-pratique.html#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb118-8"><a href="11-Ggplot-pratique.html#cb118-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> moy_total_meuros), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb118-9"><a href="11-Ggplot-pratique.html#cb118-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray95&quot;</span>, <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb118-10"><a href="11-Ggplot-pratique.html#cb118-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Moyenne&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb118-11"><a href="11-Ggplot-pratique.html#cb118-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">7.5</span>),</span>
<span id="cb118-12"><a href="11-Ggplot-pratique.html#cb118-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.5</span>))</span>
<span id="cb118-13"><a href="11-Ggplot-pratique.html#cb118-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-14"><a href="11-Ggplot-pratique.html#cb118-14" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb118-15"><a href="11-Ggplot-pratique.html#cb118-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_total_meuros =</span> <span class="fu">round</span>(<span class="fu">median</span>(total_meuros),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb118-16"><a href="11-Ggplot-pratique.html#cb118-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(median_total_meuros, reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb118-17"><a href="11-Ggplot-pratique.html#cb118-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb118-18"><a href="11-Ggplot-pratique.html#cb118-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(reg_name, <span class="fu">desc</span>(median_total_meuros)), </span>
<span id="cb118-19"><a href="11-Ggplot-pratique.html#cb118-19" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> median_total_meuros) <span class="sc">+</span></span>
<span id="cb118-20"><a href="11-Ggplot-pratique.html#cb118-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb118-21"><a href="11-Ggplot-pratique.html#cb118-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> median_total_meuros), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb118-22"><a href="11-Ggplot-pratique.html#cb118-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray95&quot;</span>, <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb118-23"><a href="11-Ggplot-pratique.html#cb118-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Médiane&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb118-24"><a href="11-Ggplot-pratique.html#cb118-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">7.5</span>),</span>
<span id="cb118-25"><a href="11-Ggplot-pratique.html#cb118-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.5</span>))</span>
<span id="cb118-26"><a href="11-Ggplot-pratique.html#cb118-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-27"><a href="11-Ggplot-pratique.html#cb118-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb118-28"><a href="11-Ggplot-pratique.html#cb118-28" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> p2) <span class="sc">+</span></span>
<span id="cb118-29"><a href="11-Ggplot-pratique.html#cb118-29" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Montant des aides financières versées aux entreprises par le fonds de solidarité pendant </span><span class="sc">\n</span><span class="st">la crise du Covid19, par région&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>, <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))) <span class="sc">&amp;</span></span>
<span id="cb118-30"><a href="11-Ggplot-pratique.html#cb118-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
</div>
<p>On observe ainsi, qu’en moyenne et en médiane, ce sont l’Île-de-France et la région PACA qui captent les montants les plus élevés des aides financières versées par le fonds de solidarité mise en place lors de la crise du Covi-19. Cela est néanmoins sûrement lié au fait que ce sont les régions qui comportent le plus grand nombre d’entreprises ; il sera donc intéressant de créer ensuite un indicateur plus pertinent rapportant le nombre d’aides au nombre d’entreprise pour une région donnée.<br />
Par ailleurs, la comparaison moyenne-médiane sur deux graphiques côte-à-côte permet également de révéler la dispersion des montants versés selon les régions : par exemple, la région Auvergne-Rhône-Alpes a reçu en moyenne 23 millions d’euros d’aides financières, la situant dans le trio de tête, mais “seulement” 7 millions en médiane la situant plutôt au milieu des autres régions. Là encore, cela peut s’expliquer par le nombre d’entreprises présentes dans la région.</p>
<p>Vous pourrez ensuite faire le même graphique par <em>secteur d’activité</em>. Qu’en concluez-vous ?</p>
<p>Voici le même graphique par secteur d’activité :</p>
<img src="Data-Mining_files/figure-html/unnamed-chunk-94-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="11-Ggplot-pratique.html#cb119-1" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="11-Ggplot-pratique.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_total_meuros =</span> <span class="fu">round</span>(<span class="fu">mean</span>(total_meuros),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="11-Ggplot-pratique.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(moy_total_meuros, naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb119-4"><a href="11-Ggplot-pratique.html#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb119-5"><a href="11-Ggplot-pratique.html#cb119-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(naf_section_code, <span class="fu">desc</span>(moy_total_meuros)), </span>
<span id="cb119-6"><a href="11-Ggplot-pratique.html#cb119-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> moy_total_meuros) <span class="sc">+</span></span>
<span id="cb119-7"><a href="11-Ggplot-pratique.html#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb119-8"><a href="11-Ggplot-pratique.html#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> moy_total_meuros), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb119-9"><a href="11-Ggplot-pratique.html#cb119-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray95&quot;</span>, <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb119-10"><a href="11-Ggplot-pratique.html#cb119-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Moyenne&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb119-11"><a href="11-Ggplot-pratique.html#cb119-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.5</span>))</span>
<span id="cb119-12"><a href="11-Ggplot-pratique.html#cb119-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-13"><a href="11-Ggplot-pratique.html#cb119-13" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb119-14"><a href="11-Ggplot-pratique.html#cb119-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_total_meuros =</span> <span class="fu">round</span>(<span class="fu">median</span>(total_meuros),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb119-15"><a href="11-Ggplot-pratique.html#cb119-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(median_total_meuros, naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb119-16"><a href="11-Ggplot-pratique.html#cb119-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb119-17"><a href="11-Ggplot-pratique.html#cb119-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(naf_section_code, <span class="fu">desc</span>(median_total_meuros)), </span>
<span id="cb119-18"><a href="11-Ggplot-pratique.html#cb119-18" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> median_total_meuros) <span class="sc">+</span></span>
<span id="cb119-19"><a href="11-Ggplot-pratique.html#cb119-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb119-20"><a href="11-Ggplot-pratique.html#cb119-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> median_total_meuros), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb119-21"><a href="11-Ggplot-pratique.html#cb119-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray95&quot;</span>, <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb119-22"><a href="11-Ggplot-pratique.html#cb119-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Médiane&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb119-23"><a href="11-Ggplot-pratique.html#cb119-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.5</span>))</span>
<span id="cb119-24"><a href="11-Ggplot-pratique.html#cb119-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-25"><a href="11-Ggplot-pratique.html#cb119-25" aria-hidden="true" tabindex="-1"></a>(p3 <span class="sc">+</span> p4) <span class="sc">+</span></span>
<span id="cb119-26"><a href="11-Ggplot-pratique.html#cb119-26" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Montant des aides financières versées aux entreprises par le fonds de solidarité pendant </span><span class="sc">\n</span><span class="st">la crise du Covid19, par secteur d&#39;activité&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>, <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))) <span class="sc">&amp;</span></span>
<span id="cb119-27"><a href="11-Ggplot-pratique.html#cb119-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
</div>
<p>C’est le secteur ‘I’ pour “Hébergement et restauration” qui a capté en moyenne et en médiane le plus d’aides financières versées par le fonds de solidarité mise en place dans le cadre de la crise du Covid-19, suivi par le secteur du commerce. On retrouve ici les secteurs les plus touchés par la crise du Covid-19 puisque l’on trouve ensuite le secteur des “arts, spectables et activités récréatives” et celui des “transports et entreposage”.<br />
Par ailleurs, on remarque que l’ordre des secteurs est assez proche lorsque l’on compare les moyennes aux médianes.</p>
On aurait pu sinon utilser un “dot plot”, comme ci-dessous. Cherchez comment l’on peut construire ce type de graphique (rq : cela ne correspond par à une fonction en tant que telle).<br />
<img src="Data-Mining_files/figure-html/unnamed-chunk-96-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="11-Ggplot-pratique.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggrepel&quot;</span>)</span>
<span id="cb120-2"><a href="11-Ggplot-pratique.html#cb120-2" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="11-Ggplot-pratique.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_total_meuros =</span> <span class="fu">round</span>(<span class="fu">mean</span>(total_meuros),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-4"><a href="11-Ggplot-pratique.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(moy_total_meuros, reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb120-5"><a href="11-Ggplot-pratique.html#cb120-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-6"><a href="11-Ggplot-pratique.html#cb120-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> moy_total_meuros,</span>
<span id="cb120-7"><a href="11-Ggplot-pratique.html#cb120-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">fct_reorder</span>(reg_name, moy_total_meuros)) <span class="sc">+</span></span>
<span id="cb120-8"><a href="11-Ggplot-pratique.html#cb120-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;burlywood4&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb120-9"><a href="11-Ggplot-pratique.html#cb120-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">0</span>, <span class="at">xend=</span>moy_total_meuros, </span>
<span id="cb120-10"><a href="11-Ggplot-pratique.html#cb120-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, moy_total_meuros),</span>
<span id="cb120-11"><a href="11-Ggplot-pratique.html#cb120-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">yend=</span><span class="fu">fct_reorder</span>(reg_name, moy_total_meuros)),</span>
<span id="cb120-12"><a href="11-Ggplot-pratique.html#cb120-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">color=</span><span class="st">&quot;snow4&quot;</span>) <span class="sc">+</span></span>
<span id="cb120-13"><a href="11-Ggplot-pratique.html#cb120-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> moy_total_meuros), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb120-14"><a href="11-Ggplot-pratique.html#cb120-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Moyenne&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb120-15"><a href="11-Ggplot-pratique.html#cb120-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb120-16"><a href="11-Ggplot-pratique.html#cb120-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">7.5</span>))</span>
<span id="cb120-17"><a href="11-Ggplot-pratique.html#cb120-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-18"><a href="11-Ggplot-pratique.html#cb120-18" aria-hidden="true" tabindex="-1"></a>p6 <span class="ot">&lt;-</span> dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb120-19"><a href="11-Ggplot-pratique.html#cb120-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_total_meuros =</span> <span class="fu">round</span>(<span class="fu">median</span>(total_meuros),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-20"><a href="11-Ggplot-pratique.html#cb120-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(median_total_meuros, reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb120-21"><a href="11-Ggplot-pratique.html#cb120-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-22"><a href="11-Ggplot-pratique.html#cb120-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> median_total_meuros,</span>
<span id="cb120-23"><a href="11-Ggplot-pratique.html#cb120-23" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">fct_reorder</span>(reg_name, median_total_meuros)) <span class="sc">+</span></span>
<span id="cb120-24"><a href="11-Ggplot-pratique.html#cb120-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;burlywood4&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb120-25"><a href="11-Ggplot-pratique.html#cb120-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">0</span>, <span class="at">xend=</span>median_total_meuros, </span>
<span id="cb120-26"><a href="11-Ggplot-pratique.html#cb120-26" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y=</span><span class="fu">fct_reorder</span>(reg_name, median_total_meuros),</span>
<span id="cb120-27"><a href="11-Ggplot-pratique.html#cb120-27" aria-hidden="true" tabindex="-1"></a>                   <span class="at">yend=</span><span class="fu">fct_reorder</span>(reg_name, median_total_meuros)),</span>
<span id="cb120-28"><a href="11-Ggplot-pratique.html#cb120-28" aria-hidden="true" tabindex="-1"></a>               <span class="at">color=</span><span class="st">&quot;snow4&quot;</span>) <span class="sc">+</span></span>
<span id="cb120-29"><a href="11-Ggplot-pratique.html#cb120-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> median_total_meuros), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb120-30"><a href="11-Ggplot-pratique.html#cb120-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Médiane&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb120-31"><a href="11-Ggplot-pratique.html#cb120-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb120-32"><a href="11-Ggplot-pratique.html#cb120-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">7.5</span>))</span>
<span id="cb120-33"><a href="11-Ggplot-pratique.html#cb120-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-34"><a href="11-Ggplot-pratique.html#cb120-34" aria-hidden="true" tabindex="-1"></a>(p5 <span class="sc">+</span> p6) <span class="sc">+</span></span>
<span id="cb120-35"><a href="11-Ggplot-pratique.html#cb120-35" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Montant total des aides financières versées aux entreprises par le fonds de solidarité </span><span class="sc">\n</span><span class="st">pendant la crise du Covid19, par secteur d&#39;activité&quot;</span>, </span>
<span id="cb120-36"><a href="11-Ggplot-pratique.html#cb120-36" aria-hidden="true" tabindex="-1"></a>                <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>, </span>
<span id="cb120-37"><a href="11-Ggplot-pratique.html#cb120-37" aria-hidden="true" tabindex="-1"></a>                <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))) <span class="sc">&amp;</span></span>
<span id="cb120-38"><a href="11-Ggplot-pratique.html#cb120-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
</div>
</div>
<div id="lien-entre-le-montant-moyen-des-aides-versées-et-le-nombre-moyen-dentreprises-bénéficiaires-par-secteur-dactivité-puis-par-région" class="section level3 hasAnchor" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Lien entre le montant moyen des aides versées et le nombre moyen d’entreprises bénéficiaires, par secteur d’activité puis par région<a href="11-Ggplot-pratique.html#lien-entre-le-montant-moyen-des-aides-versées-et-le-nombre-moyen-dentreprises-bénéficiaires-par-secteur-dactivité-puis-par-région" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Construisez maintenant un graphique montrant la corrélation entre le montant <em>moyen</em> des aides versées aux entreprises par le fonds de solidarité pendant la crise du Covid19 et le nombre <em>moyen</em> d’entreprises bénéficiaires, par <em>secteur d’activité</em>.</p>
<p>De même, il faut procéder par étapes :</p>
<ul>
<li>créer d’abord les variables de moyenne des aides et du nombre d’entreprises ;</li>
<li>ne garder que ces variables, supprimer les lignes doublons le cas échéant ;</li>
<li>construisez un graphique sous forme de nuages de points, puis ajoutez-y une régression linéaire, n’oubliez pas d’indiquer les régions ;</li>
<li>pour une meilleure lisibilité du graphe, on peut indiquer les codes des secteurs directement dans le graphe à côté des points, vous pouvez pour cela utiliser le très utile package <strong><code>ggrepel</code></strong> et sa fonction <code>geom_text_repel()</code> (pratique car en cas de chevauchement un trait sur le côté est mis automatiquement), au lieu de <code>geom_text()</code> vue précédemment.</li>
</ul>
<img src="Data-Mining_files/figure-html/unnamed-chunk-98-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="11-Ggplot-pratique.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggrepel&quot;</span>)</span>
<span id="cb121-2"><a href="11-Ggplot-pratique.html#cb121-2" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="11-Ggplot-pratique.html#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb121-4"><a href="11-Ggplot-pratique.html#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_aides_secteur =</span> <span class="fu">round</span>(<span class="fu">mean</span>(total_meuros),<span class="dv">0</span>),</span>
<span id="cb121-5"><a href="11-Ggplot-pratique.html#cb121-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">moy_nbentre_secteur =</span> <span class="fu">round</span>(<span class="fu">mean</span>(nombre_entreprises),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb121-6"><a href="11-Ggplot-pratique.html#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(moy_aides_secteur, moy_nbentre_secteur, naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb121-7"><a href="11-Ggplot-pratique.html#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb121-8"><a href="11-Ggplot-pratique.html#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> moy_aides_secteur, <span class="at">y =</span> moy_nbentre_secteur) <span class="sc">+</span></span>
<span id="cb121-9"><a href="11-Ggplot-pratique.html#cb121-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">fct_reorder</span>(naf_section_code, <span class="fu">desc</span>(moy_aides_secteur))), </span>
<span id="cb121-10"><a href="11-Ggplot-pratique.html#cb121-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb121-11"><a href="11-Ggplot-pratique.html#cb121-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">color=</span><span class="st">&quot;gray55&quot;</span>, <span class="at">size=</span><span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb121-12"><a href="11-Ggplot-pratique.html#cb121-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> naf_section_code),<span class="at">size =</span> <span class="fl">2.9</span>)  <span class="sc">+</span></span>
<span id="cb121-13"><a href="11-Ggplot-pratique.html#cb121-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3500</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">3500</span>,<span class="dv">200</span>)) <span class="sc">+</span></span>
<span id="cb121-14"><a href="11-Ggplot-pratique.html#cb121-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">125</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">125</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb121-15"><a href="11-Ggplot-pratique.html#cb121-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Corrélation entre le montant moyen des aides versées aux entreprises par le fonds de </span><span class="sc">\n</span><span class="st">solidarité pendant la crise du Covid19 et le nombre moyen d&#39;entreprises bénéficiaires, </span><span class="sc">\n</span><span class="st">par secteur d&#39;activité&quot;</span>,</span>
<span id="cb121-16"><a href="11-Ggplot-pratique.html#cb121-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Montant moyen des aides versées (en millions d&#39;euros)&quot;</span>,</span>
<span id="cb121-17"><a href="11-Ggplot-pratique.html#cb121-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Nombre moyen d&#39;entreprises&quot;</span>,</span>
<span id="cb121-18"><a href="11-Ggplot-pratique.html#cb121-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb121-19"><a href="11-Ggplot-pratique.html#cb121-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb121-20"><a href="11-Ggplot-pratique.html#cb121-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>), </span>
<span id="cb121-21"><a href="11-Ggplot-pratique.html#cb121-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb121-22"><a href="11-Ggplot-pratique.html#cb121-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb121-23"><a href="11-Ggplot-pratique.html#cb121-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb121-24"><a href="11-Ggplot-pratique.html#cb121-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>)) </span></code></pre></div>
</div>
<p>Voici le même grahique par <strong>région</strong>, en laissant cette fois la légende sur le côté :
<img src="Data-Mining_files/figure-html/unnamed-chunk-100-1.svg" width="672" /></p>
<div class="solution-exo">
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="11-Ggplot-pratique.html#cb122-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="11-Ggplot-pratique.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb122-3"><a href="11-Ggplot-pratique.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_aides_region =</span> <span class="fu">round</span>(<span class="fu">mean</span>(total_meuros),<span class="dv">0</span>),</span>
<span id="cb122-4"><a href="11-Ggplot-pratique.html#cb122-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">moy_nbentre_region =</span> <span class="fu">round</span>(<span class="fu">mean</span>(nombre_entreprises),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb122-5"><a href="11-Ggplot-pratique.html#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(moy_aides_region, moy_nbentre_region, reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb122-6"><a href="11-Ggplot-pratique.html#cb122-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb122-7"><a href="11-Ggplot-pratique.html#cb122-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> moy_aides_region, <span class="at">y =</span> moy_nbentre_region) <span class="sc">+</span> </span>
<span id="cb122-8"><a href="11-Ggplot-pratique.html#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">fct_reorder</span>(reg_name, <span class="fu">desc</span>(moy_aides_region))), </span>
<span id="cb122-9"><a href="11-Ggplot-pratique.html#cb122-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb122-10"><a href="11-Ggplot-pratique.html#cb122-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">color=</span><span class="st">&quot;gray55&quot;</span>, <span class="at">size=</span><span class="fl">0.9</span>) <span class="sc">+</span> </span>
<span id="cb122-11"><a href="11-Ggplot-pratique.html#cb122-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3200</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">3200</span>,<span class="dv">200</span>)) <span class="sc">+</span> </span>
<span id="cb122-12"><a href="11-Ggplot-pratique.html#cb122-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">75</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">75</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb122-13"><a href="11-Ggplot-pratique.html#cb122-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Corrélation entre le montant moyen des aides versées aux </span><span class="sc">\n</span><span class="st">entreprises par le fonds de solidarité pendant la crise du </span><span class="sc">\n</span><span class="st">Covid19 et le nombre moyen d&#39;entreprises bénéficiaires, </span><span class="sc">\n</span><span class="st">par région&quot;</span>, </span>
<span id="cb122-14"><a href="11-Ggplot-pratique.html#cb122-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Montant moyen des aides versées (en millions d&#39;euros)&quot;</span>, </span>
<span id="cb122-15"><a href="11-Ggplot-pratique.html#cb122-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Nombre moyen d&#39;entreprises&quot;</span>, </span>
<span id="cb122-16"><a href="11-Ggplot-pratique.html#cb122-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Région&quot;</span>,</span>
<span id="cb122-17"><a href="11-Ggplot-pratique.html#cb122-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur </span><span class="sc">\n</span><span class="st">&#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb122-18"><a href="11-Ggplot-pratique.html#cb122-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb122-19"><a href="11-Ggplot-pratique.html#cb122-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb122-20"><a href="11-Ggplot-pratique.html#cb122-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb122-21"><a href="11-Ggplot-pratique.html#cb122-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">7.5</span>),</span>
<span id="cb122-22"><a href="11-Ggplot-pratique.html#cb122-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb122-23"><a href="11-Ggplot-pratique.html#cb122-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>)) </span></code></pre></div>
</div>
<p>Cela confirme qu’il faut créer un indicateur pour être plus pertinent dans la manipulation de cette base et dans les résultats que l’on souhaite mettre en avant. En effet, ces deux derniers graphiques montrant une corrélation nette entre le montant moyen des aides versées et le nombre moyen d’entreprises dans une région (c’est-à-dire plus il y a d’entreprises dans une région, plus le montant moyen sera important), on pourrait construire un indicateur rapportant le montant total des aides versées au nombre d’entreprises de la région, pour en faire un montant moyen par entreprise pour chaque région.</p>
</div>
<div id="montant-moyen-des-aides-versées-par-entreprise-dans-chaque-région-ou-chaque-secteur-dactivité" class="section level3 hasAnchor" number="11.2.4">
<h3><span class="header-section-number">11.2.4</span> Montant moyen des aides versées par entreprise dans chaque région ou chaque secteur d’activité<a href="11-Ggplot-pratique.html#montant-moyen-des-aides-versées-par-entreprise-dans-chaque-région-ou-chaque-secteur-dactivité" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Construisez donc de nouveau un graphique en bâtons, mais avec cette fois la valeur de cet indicateur (rapport de la somme totale des aides par le nombre total d’entreprises) par région :
<img src="Data-Mining_files/figure-html/unnamed-chunk-102-1.svg" width="672" /></p>
<div class="solution-exo">
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="11-Ggplot-pratique.html#cb123-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="11-Ggplot-pratique.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_region =</span> <span class="fu">sum</span>(total),</span>
<span id="cb123-3"><a href="11-Ggplot-pratique.html#cb123-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">nombre_entreprises_region =</span> <span class="fu">sum</span>(nombre_entreprises),</span>
<span id="cb123-4"><a href="11-Ggplot-pratique.html#cb123-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">aides_par_entre =</span> <span class="fu">round</span>(total_region <span class="sc">/</span> nombre_entreprises_region, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb123-5"><a href="11-Ggplot-pratique.html#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(aides_par_entre, reg_name) <span class="sc">%&gt;%</span> </span>
<span id="cb123-6"><a href="11-Ggplot-pratique.html#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb123-7"><a href="11-Ggplot-pratique.html#cb123-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(reg_name, <span class="fu">desc</span>(aides_par_entre)), </span>
<span id="cb123-8"><a href="11-Ggplot-pratique.html#cb123-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> aides_par_entre) <span class="sc">+</span></span>
<span id="cb123-9"><a href="11-Ggplot-pratique.html#cb123-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb123-10"><a href="11-Ggplot-pratique.html#cb123-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> aides_par_entre), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb123-11"><a href="11-Ggplot-pratique.html#cb123-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray95&quot;</span>, <span class="at">size=</span><span class="fl">2.6</span>) <span class="sc">+</span></span>
<span id="cb123-12"><a href="11-Ggplot-pratique.html#cb123-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Montant moyen des aides versées par entreprise dans chaque région&quot;</span>, </span>
<span id="cb123-13"><a href="11-Ggplot-pratique.html#cb123-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y=</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb123-14"><a href="11-Ggplot-pratique.html#cb123-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb123-15"><a href="11-Ggplot-pratique.html#cb123-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb123-16"><a href="11-Ggplot-pratique.html#cb123-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb123-17"><a href="11-Ggplot-pratique.html#cb123-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>, <span class="at">size=</span><span class="dv">8</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
</div>
<p>On se rend alors compte que c’est la Corse qui arrive en tête : en moyenne, chaque entreprise a obtenu 22 419 euros d’aides financières par le fonds de solidarité ; on retrouve ensuite l’Île-de-France avec en moyenne 22 281 euros par entreprise.</p>
<p>Voici le même graphique par secteur d’activité :
<img src="Data-Mining_files/figure-html/unnamed-chunk-104-1.svg" width="672" /></p>
<div class="solution-exo">
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="11-Ggplot-pratique.html#cb124-1" aria-hidden="true" tabindex="-1"></a>dt_aidesCovid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="11-Ggplot-pratique.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_region =</span> <span class="fu">sum</span>(total),</span>
<span id="cb124-3"><a href="11-Ggplot-pratique.html#cb124-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">nombre_entreprises_region =</span> <span class="fu">sum</span>(nombre_entreprises),</span>
<span id="cb124-4"><a href="11-Ggplot-pratique.html#cb124-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">aides_par_entre =</span> <span class="fu">round</span>(total_region <span class="sc">/</span> nombre_entreprises_region, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb124-5"><a href="11-Ggplot-pratique.html#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(aides_par_entre, naf_section_code) <span class="sc">%&gt;%</span> </span>
<span id="cb124-6"><a href="11-Ggplot-pratique.html#cb124-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb124-7"><a href="11-Ggplot-pratique.html#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(naf_section_code, <span class="fu">desc</span>(aides_par_entre)), </span>
<span id="cb124-8"><a href="11-Ggplot-pratique.html#cb124-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> aides_par_entre) <span class="sc">+</span></span>
<span id="cb124-9"><a href="11-Ggplot-pratique.html#cb124-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb124-10"><a href="11-Ggplot-pratique.html#cb124-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> aides_par_entre), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb124-11"><a href="11-Ggplot-pratique.html#cb124-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray95&quot;</span>, <span class="at">size=</span><span class="fl">2.6</span>) <span class="sc">+</span></span>
<span id="cb124-12"><a href="11-Ggplot-pratique.html#cb124-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Montant moyen des aides versées par entreprise dans chaque secteur d&#39;activité&quot;</span>, </span>
<span id="cb124-13"><a href="11-Ggplot-pratique.html#cb124-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Secteur d&#39;activité&quot;</span>, <span class="at">y=</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb124-14"><a href="11-Ggplot-pratique.html#cb124-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;aides-entreprises-covid-19-france&#39; téléchargée sur &#39;public.opendatasoft.com&#39; via l&#39;API. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span> </span>
<span id="cb124-15"><a href="11-Ggplot-pratique.html#cb124-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb124-16"><a href="11-Ggplot-pratique.html#cb124-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb124-17"><a href="11-Ggplot-pratique.html#cb124-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>))</span></code></pre></div>
</div>
<p>Ici, c’est de nouveau le secteur de l’hébergement-restauration qui apparaît premier : en moyenne, chaque entreprise de ce secteur a reçu 57 755 euros d’aides financières. En revanche, le second secteur dont les entreprises ont reçu en moyenne le plus d’aides financières est celui de l’administration publique (‘O’).</p>
</div>
<div id="top-5-des-aides-financières-versées-selon-la-région-ou-le-secteur-dactivité" class="section level3 hasAnchor" number="11.2.5">
<h3><span class="header-section-number">11.2.5</span> Top 5 des aides financières versées selon la région ou le secteur d’activité<a href="11-Ggplot-pratique.html#top-5-des-aides-financières-versées-selon-la-région-ou-le-secteur-dactivité" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En vue de l’application sur Shiny, construisez un graphique en bâtons indiquant les seules 5 premières régions totalisant le plus d’aides financières en millions d’euros.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="11-Ggplot-pratique.html#cb125-1" aria-hidden="true" tabindex="-1"></a>    dt_aidesCovid <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="11-Ggplot-pratique.html#cb125-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(reg_name) <span class="sc">%&gt;%</span>  </span>
<span id="cb125-3"><a href="11-Ggplot-pratique.html#cb125-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">montant_total =</span> <span class="fu">round</span>(<span class="fu">sum</span>(total_meuros))) <span class="sc">%&gt;%</span> </span>
<span id="cb125-4"><a href="11-Ggplot-pratique.html#cb125-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(montant_total)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb125-5"><a href="11-Ggplot-pratique.html#cb125-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> montant_total, <span class="at">y =</span> <span class="fu">fct_reorder</span>(reg_name, montant_total), <span class="at">fill=</span>reg_name) <span class="sc">+</span> </span>
<span id="cb125-6"><a href="11-Ggplot-pratique.html#cb125-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>)  <span class="sc">+</span></span>
<span id="cb125-7"><a href="11-Ggplot-pratique.html#cb125-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>montant_total), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust=</span><span class="fl">0.5</span>), <span class="at">size=</span><span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb125-8"><a href="11-Ggplot-pratique.html#cb125-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Top 5 des aides financières versées par le fond de solidarité, </span><span class="sc">\n</span><span class="st">réparties par région&quot;</span>,</span>
<span id="cb125-9"><a href="11-Ggplot-pratique.html#cb125-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">&quot;Montant total en millions d&#39;euros&quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb125-10"><a href="11-Ggplot-pratique.html#cb125-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set2&quot;</span>) <span class="sc">+</span></span>
<span id="cb125-11"><a href="11-Ggplot-pratique.html#cb125-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb125-12"><a href="11-Ggplot-pratique.html#cb125-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>, <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">13</span>),</span>
<span id="cb125-13"><a href="11-Ggplot-pratique.html#cb125-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb125-14"><a href="11-Ggplot-pratique.html#cb125-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb125-15"><a href="11-Ggplot-pratique.html#cb125-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-106-1.svg" width="672" /></p>
</div>
<div id="à-vous-de-jouer" class="section level3 hasAnchor" number="11.2.6">
<h3><span class="header-section-number">11.2.6</span> À vous de “jouer” !<a href="11-Ggplot-pratique.html#à-vous-de-jouer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Bien sûr, vous pouvez créer des fonctions sur ces graphiques ; puis “jouez” avec d’autres variables, notamment les départements (“dep_name”) et le nombre d’aides (“financial_support_count”) ; ou encore construire des cartes sur le niveau département (même s’il n’est pas très fin) ; utiliser d’autres types de graphiques ; etc. ; etc.</p>

</div>
</div>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="10-Ggplot-theorique.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="12-Retour-sur-Shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/github.io-Data-Mining/master/11-Ggplot-pratique.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
